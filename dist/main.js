module.exports=function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={i:moduleId,l:!1,exports:{}};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.l=!0,module.exports}return __webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.d=function(exports,name,getter){__webpack_require__.o(exports,name)||Object.defineProperty(exports,name,{enumerable:!0,get:getter})},__webpack_require__.r=function(exports){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(exports,"__esModule",{value:!0})},__webpack_require__.t=function(value,mode){if(1&mode&&(value=__webpack_require__(value)),8&mode)return value;if(4&mode&&"object"==typeof value&&value&&value.__esModule)return value;var ns=Object.create(null);if(__webpack_require__.r(ns),Object.defineProperty(ns,"default",{enumerable:!0,value:value}),2&mode&&"string"!=typeof value)for(var key in value)__webpack_require__.d(ns,key,function(key){return value[key]}.bind(null,key));return ns},__webpack_require__.n=function(module){var getter=module&&module.__esModule?function(){return module.default}:function(){return module};return __webpack_require__.d(getter,"a",getter),getter},__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=48)}([
/*!************************************************!*\
  !*** ./ts-dist/reporting/report-controller.js ***!
  \************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.ReportController=class{static checkForReportFlag(){if(Game.time%10!=0)return;const flagNames=Object.keys(Game.flags);for(let i=0;i<flagNames.length;i++)if("report"===flagNames[i])return Game.flags[flagNames[i]].remove(),void console.log(this.report());const lastReport=new Date(Memory.myMemory.report.lastReportTimeStamp);if(((new Date).getTime()-lastReport.getTime())/1e3>604800){const email="You haven't requested a report in a week. Here's a report.\n"+this.report();Game.notify(email)}}static log(messageType,message){console.log(messageType+": "+message)}static report(){let result="BEGIN REPORT:\n";const lastReportTime=new Date(Memory.myMemory.report.lastReportTimeStamp);result+="Last report: "+this.niceDateFormat(lastReportTime)+"("+this.timeSince(lastReportTime)+")\n";for(let i=0;i<Memory.myMemory.report.reports.length;i++){const report=Memory.myMemory.report.reports[i],reportTime=new Date(report.timeStamp);let outputString=this.niceDateFormat(reportTime);outputString+=" ("+this.timeSince(reportTime)+") ",outputString+="tick "+report.tick+" ",outputString+=report.messageType+": ",result+=(outputString+=report.message)+"\n"}return result+="END OF REPORT",Memory.myMemory.report={reports:[],lastReportTimeStamp:(new Date).getTime()},result}static niceDateFormat(date){const localDate=new Date(date.toLocaleString("en-US",{timeZone:"Australia/Melbourne"}));return localDate.getMonth()+1+"-"+localDate.getDate()+" "+localDate.getHours()+":"+localDate.getMinutes()+":"+localDate.getSeconds()}static timeSince(date){let secondsLeft=Math.floor(((new Date).getTime()-date.getTime())/1e3),result="";if(secondsLeft>=604800){const weeks=Math.floor(secondsLeft/604800);secondsLeft-=604800*weeks,result+=weeks+"w, "}if(secondsLeft>=86400){const days=Math.floor(secondsLeft/86400);secondsLeft-=86400*days,result+=days+"d, "}if(secondsLeft>=3600){const hours=Math.floor(secondsLeft/3600);secondsLeft-=3600*hours,result+=hours+"h, "}if(secondsLeft>=60){const minutes=Math.floor(secondsLeft/60);secondsLeft-=60*minutes,result+=minutes+"m, "}return secondsLeft>=0&&(result+=secondsLeft+"s"),result+=" ago"}}},
/*!********************************************!*\
  !*** ./ts-dist/global/helper-functions.js ***!
  \********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.HelperFunctions=class{static getId(){const toReturn=Memory.myMemory.globalId;return Memory.myMemory.globalId++,toReturn}static generateBody(baseBody,bodyPartsToAdd,room,useBest,maxBodySize=50,fillWithTough=!1){const maxEnergyToUse=useBest?room.energyCapacityAvailable:room.energyAvailable;let body=baseBody;for(;this.calcBodyCost(body)+this.calcBodyCost(bodyPartsToAdd)<=maxEnergyToUse&&body.length+bodyPartsToAdd.length<=maxBodySize;)body=body.concat(bodyPartsToAdd);if(fillWithTough){const toughtPart=[TOUGH];for(;this.calcBodyCost(body)+this.calcBodyCost(toughtPart)<=maxEnergyToUse&&body.length+1<=maxBodySize;)body=toughtPart.concat(body)}return body}static amountOfExtensions(room,structureConstant){return room.find(FIND_STRUCTURES,{filter:structure=>structure.structureType===structureConstant}).length}static getRoomsFlags(myRoom){const result=[],flagNames=Object.keys(Game.flags);for(let i=0;i<flagNames.length;i++){const flag=Game.flags[flagNames[i]];null!=flag.room&&flag.room.name===myRoom.name&&result.push(flag)}return result}static roomPosToMyPos(roomPos){return{x:roomPos.x,y:roomPos.y,roomName:roomPos.roomName}}static myPosToRoomPos(myPos){return new RoomPosition(myPos.x,myPos.y,myPos.roomName)}static isAllyUsername(username){return-1!==["james1652"].indexOf(username.toLowerCase())}static findClosestSpawn(roomPos){let spawnToReturn=null,closestDistance=9999;for(let i=0;i<Memory.myMemory.myRooms.length;i++){const myRoom=Memory.myMemory.myRooms[i];if(myRoom.spawns.length>=1){const distance=Game.map.getRoomLinearDistance(roomPos.roomName,myRoom.name);distance<closestDistance&&(closestDistance=distance,spawnToReturn=Game.spawns[myRoom.spawns[0].name])}}return spawnToReturn}static getMyRoomByName(name){for(let j=0;j<Memory.myMemory.myRooms.length;j++)if(Memory.myMemory.myRooms[j].name===name)return Memory.myMemory.myRooms[j];return null}static calcBodyCost(body){return body.reduce(function(cost,part){return cost+BODYPART_COST[part]},0)}}},
/*!************************************************!*\
  !*** ./ts-dist/room/stages/stage-functions.js ***!
  \************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const helper_functions_1=__webpack_require__(/*! ../../global/helper-functions */1),report_controller_1=__webpack_require__(/*! ../../reporting/report-controller */0);exports.StageFunctions=class{static buildExtensions(myRoom,numberOfExtensionsToBuild){const roomFlags=helper_functions_1.HelperFunctions.getRoomsFlags(myRoom);for(let i=roomFlags.length-1;i>=0;i--)"ex"!==roomFlags[i].name.split("-")[0]&&roomFlags.splice(i,1);for(let i=0;i<roomFlags.length;i++){const roomFlag=roomFlags[i],flagNameSplit=roomFlag.name.split("-");if(Number(flagNameSplit[1])<=numberOfExtensionsToBuild){const result=Game.rooms[myRoom.name].createConstructionSite(roomFlag.pos,STRUCTURE_EXTENSION);result===OK?(console.log("LOG: Placed extension construction site"),roomFlag.remove()):result!==ERR_RCL_NOT_ENOUGH&&report_controller_1.ReportController.log("ERROR","Placing a extension construction site errored "+result)}}0===Game.rooms[myRoom.name].find(FIND_CONSTRUCTION_SITES).length&&console.log("ATTENTION: Room "+myRoom.name+" needs more extension flags (up to ex-"+numberOfExtensionsToBuild.toString()+")")}static buildTowers(myRoom,numberOfTowersToBuild){const roomFlags=helper_functions_1.HelperFunctions.getRoomsFlags(myRoom);for(let i=roomFlags.length-1;i>=0;i--)"tower"!==roomFlags[i].name.split("-")[0]&&roomFlags.splice(i,1);for(let i=0;i<roomFlags.length;i++){const roomFlag=roomFlags[i],flagNameSplit=roomFlag.name.split("-");Number(flagNameSplit[1])<=numberOfTowersToBuild&&(Game.rooms[myRoom.name].createConstructionSite(roomFlag.pos,STRUCTURE_TOWER)===OK?(console.log("LOG: Placed tower construction site"),roomFlag.remove()):report_controller_1.ReportController.log("ERROR","Placing a tower construction site errored"))}}static setupSourceLink(myRoom){const roomFlags=helper_functions_1.HelperFunctions.getRoomsFlags(myRoom);for(let i=roomFlags.length-1;i>=0;i--){const flagNameSplit=roomFlags[i].name.split("-");"link"===flagNameSplit[0]&&"source"===flagNameSplit[1]||roomFlags.splice(i,1)}let placedFully=!1;for(let i=0;i<roomFlags.length;i++){const roomFlag=roomFlags[i];if(Game.rooms[myRoom.name].createConstructionSite(roomFlag.pos,STRUCTURE_LINK)===OK){for(let j=0;j<myRoom.mySources.length;j++){const mySource=myRoom.mySources[j],source=Game.getObjectById(mySource.id);null==source?report_controller_1.ReportController.log("ERROR","Source was null when trying to get it by ID"):source.pos.inRangeTo(roomFlag.pos,2)&&(mySource.link={pos:helper_functions_1.HelperFunctions.roomPosToMyPos(roomFlag.pos),id:null},placedFully=!0)}placedFully?(console.log("LOG: Placed source link construction site"),roomFlag.remove()):report_controller_1.ReportController.log("ERROR","Placed a construction site at a flag but couldn't find a source to give it to")}}for(let i=0;i<myRoom.mySources.length;i++){const mySource=myRoom.mySources[i];if(null!=mySource.link&&null==mySource.link.id){const structures=helper_functions_1.HelperFunctions.myPosToRoomPos(mySource.link.pos).lookFor(LOOK_STRUCTURES);for(let j=0;j<structures.length;j++)if(structures[j].structureType===STRUCTURE_LINK){mySource.link.id=structures[j].id,mySource.state="Link";break}}}placedFully||0!==Game.rooms[myRoom.name].find(FIND_CONSTRUCTION_SITES).length||console.log("ATTENTION: Room "+myRoom.name+" needs source link flag (link-source-X) OR out link flag (link-out-X)")}static setupOutLink(myRoom){const roomFlags=helper_functions_1.HelperFunctions.getRoomsFlags(myRoom);for(let i=roomFlags.length-1;i>=0;i--){const flagNameSplit=roomFlags[i].name.split("-");"link"===flagNameSplit[0]&&"out"===flagNameSplit[1]||roomFlags.splice(i,1)}for(let i=0;i<roomFlags.length;i++){const roomFlag=roomFlags[i];Game.rooms[myRoom.name].createConstructionSite(roomFlag.pos,STRUCTURE_LINK)===OK&&(myRoom.outLinks.push({pos:helper_functions_1.HelperFunctions.roomPosToMyPos(roomFlag.pos),id:null}),console.log("LOG: Placed out link construction site"),roomFlag.remove())}for(let i=0;i<myRoom.outLinks.length;i++){const outLink=myRoom.outLinks[i];if(null==outLink.id){const structures=helper_functions_1.HelperFunctions.myPosToRoomPos(outLink.pos).lookFor(LOOK_STRUCTURES);for(let j=0;j<structures.length;j++){const structure=structures[j];if(structure.structureType===STRUCTURE_LINK){outLink.id=structure.id;break}}}}0===Game.rooms[myRoom.name].find(FIND_CONSTRUCTION_SITES).length&&console.log("ATTENTION: Room "+myRoom.name+" needs source link flag (link-source-X) OR out link flag (link-out-X)")}static clearHaulersAndCaches(myRoom){for(let i=0;i<myRoom.mySources.length;i++){const mySource=myRoom.mySources[i];if("Link"===mySource.state&&null!=mySource.link&&null!=mySource.link.id){for(let j=0;j<mySource.haulerNames.length;j++){const haulerName=mySource.haulerNames[j],creep=Game.creeps[haulerName];null!=creep&&(creep.say("dthb4dshnr"),creep.suicide(),console.log("LOG: "+myRoom.name+" clearHaulersAndCaches killed a hauler"))}if(mySource.haulerNames=[],null!=mySource.minerName){const creep=Game.creeps[mySource.minerName];null!=creep&&0===creep.getActiveBodyparts(CARRY)&&(creep.say("dthb4dshnr"),creep.suicide(),mySource.minerName=null,console.log("LOG: "+myRoom.name+" clearHaulersAndCaches killed a miner with no CARRY"))}if(null!=mySource.cache&&null!=mySource.cache.id){const cache=Game.getObjectById(mySource.cache.id);null==cache?mySource.cache.id=null:(cache.destroy(),mySource.cache.id=null,console.log("LOG: "+myRoom.name+" clearHaulersAndCaches destroyed a cache"))}}}}}},
/*!*************************************!*\
  !*** ./ts-dist/global/constants.js ***!
  \*************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});class Constants{}Constants.MAX_HAULERS_PER_SOURCE=2,Constants.PERCENT_OF_CACHE_ENERGY_TO_SPAWN_HAULER=.5,Constants.HAULER_COOLDOWN_DISTANCE_FACTOR=1.2,Constants.AMOUNT_OF_BANK_ENERGY_TO_SPAWN_LABORER=1e5,Constants.MAX_LABORERS=10,Constants.MIN_LABORERS=1,Constants.LABORERS_BEFORE_BANK=6,Constants.SOURCE_LINK_TRANSFER_AT=.5,Constants.WALL_AND_RAMPART_GOAL_HEALTH=1e4,Constants.TOWER_REPAIR_ABOVE_PERCENT=.5,Constants.CONSCRIPTION_RANGE=3,Constants.CONSCRIPTION_QUICK_MINIMUM_STAGE=4,Constants.CONSCRIPTION_PRESSURE_MINIMUM_STAGE=5.9,Constants.RALLY_FLAG_RANGE=3,exports.Constants=Constants},
/*!*************************************************!*\
  !*** ./ts-dist/schedule/schedule-controller.js ***!
  \*************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const report_controller_1=__webpack_require__(/*! ../reporting/report-controller */0);exports.ScheduleController=class{static preLoop(myMemory){for(let i=myMemory.scheduledCommands.length-1;i>=0;i--){const scheduledCommand=myMemory.scheduledCommands[i];"SET_FALSE_ON_PENDING_CONSCRIPTED_CREEP"===scheduledCommand.action&&this.setFalseOnPendingConscriptedCreep(myMemory,scheduledCommand.roomName),myMemory.scheduledCommands.splice(i,1)}}static scheduleForNextTick(action,roomName){Memory.myMemory.scheduledCommands.push({action:action,roomName:roomName})}static setFalseOnPendingConscriptedCreep(myMemory,roomName){for(let i=0;i<myMemory.myRooms.length;i++)if(myMemory.myRooms[i].name===roomName)return void(myMemory.myRooms[i].pendingConscriptedCreep=!1);report_controller_1.ReportController.log("ERROR","Failed to find the room to set pendingConscriptedCreep to false. roomName: "+roomName)}}},
/*!***************************************************!*\
  !*** ./ts-dist/empire/attack-helper-functions.js ***!
  \***************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});class AttackHelperFunctions{static getNewTargetIfNeeded(attackTarget,flag){if(null!=attackTarget){const roomObject=Game.getObjectById(attackTarget.id);null==roomObject?attackTarget=AttackHelperFunctions.getAttackTarget(flag):attackTarget.roomObject=roomObject}else attackTarget=AttackHelperFunctions.getAttackTarget(flag);return attackTarget}static getAttackTarget(flagToPathFrom){if(null==flagToPathFrom.room)return null;null==Game.flags["attack-target"]&&(Game.flags["attack-target"]=new Flag("attack-target",COLOR_RED,COLOR_RED,flagToPathFrom.room.name,1,1));const targetFlag=Game.flags["attack-target"],flagPos=flagToPathFrom.pos,room=flagToPathFrom.room,costMatrix=new PathFinder.CostMatrix;room.find(FIND_STRUCTURES).forEach(function(struct){struct.structureType!==STRUCTURE_WALL&&struct.structureType!==STRUCTURE_RAMPART||costMatrix.set(struct.pos.x,struct.pos.y,255)});const spawns=room.find(FIND_HOSTILE_SPAWNS),spawnTarget=this.pathFindToRoomObject(flagPos,spawns,costMatrix);if(null!=spawnTarget)return console.log("LOG: New Attack Target (Spawn) "+JSON.stringify(spawnTarget.roomObject.pos)),targetFlag.setPosition(spawnTarget.roomObject.pos),{roomObject:spawnTarget.roomObject,id:spawnTarget.roomObject.id,type:"Spawn"};const towers=room.find(FIND_STRUCTURES,{filter:structure=>structure.structureType===STRUCTURE_TOWER}),towerTarget=this.pathFindToRoomObject(flagPos,towers,costMatrix);if(null!=towerTarget)return console.log("LOG: New Attack Target (Tower) "+JSON.stringify(towerTarget.roomObject.pos)),targetFlag.setPosition(towerTarget.roomObject.pos),{roomObject:towerTarget.roomObject,id:towerTarget.roomObject.id,type:"Tower"};const creeps=room.find(FIND_HOSTILE_CREEPS),creepTarget=this.pathFindToRoomObject(flagPos,creeps,costMatrix);if(null!=creepTarget)return console.log("LOG: New Attack Target (Creep) "+JSON.stringify(creepTarget.roomObject.pos)),targetFlag.setPosition(creepTarget.roomObject.pos),{roomObject:creepTarget.roomObject,id:creepTarget.roomObject.id,type:"Creep"};const ramparts=room.find(FIND_STRUCTURES,{filter:structure=>structure.structureType===STRUCTURE_RAMPART}),rampartTarget=this.pathFindToRoomObject(flagPos,ramparts,costMatrix);if(null!=rampartTarget)return console.log("LOG: New Attack Target (Rampart) "+JSON.stringify(rampartTarget.roomObject.pos)),targetFlag.setPosition(rampartTarget.roomObject.pos),{roomObject:rampartTarget.roomObject,id:rampartTarget.roomObject.id,type:"Rampart"};const walls=room.find(FIND_STRUCTURES,{filter:structure=>structure.structureType===STRUCTURE_WALL}),wallTarget=this.pathFindToRoomObject(flagPos,walls,costMatrix);return null!=wallTarget?(console.log("LOG: New Attack Target (Wall) "+JSON.stringify(wallTarget.roomObject.pos)),targetFlag.setPosition(wallTarget.roomObject.pos),{roomObject:wallTarget.roomObject,id:wallTarget.roomObject.id,type:"Wall"}):(console.log("LOG: Nothing pathable in getAttackTarget"),targetFlag.remove(),null)}static endAttack(){const flagNames=Object.keys(Game.flags);for(let i=flagNames.length-1;i>=0;i--)if(flagNames[i].includes("attack")){Game.flags[flagNames[i]].remove()}const myRooms=Memory.myMemory.myRooms;for(let i=0;i<myRooms.length;i++)myRooms[i].pendingConscriptedCreep=!1}static pathFindToRoomObject(start,roomObjects,costmatrix){if(0===roomObjects.length)return null;let result=null;for(let i=0;i<roomObjects.length;i++){const roomObject=roomObjects[i],pathFinderPath=PathFinder.search(start,{pos:roomObject.pos,range:1},{roomCallback:roomName=>{if(roomName===start.roomName)return costmatrix;{const room=Game.rooms[roomName],costMatrix=new PathFinder.CostMatrix;return null==room?costMatrix:(room.find(FIND_STRUCTURES).forEach(function(struct){struct.structureType!==STRUCTURE_WALL&&struct.structureType!==STRUCTURE_RAMPART||costMatrix.set(struct.pos.x,struct.pos.y,255)}),costMatrix)}}});pathFinderPath.incomplete||(null==result?result={roomObject:roomObject,pathFinderPath:pathFinderPath}:result.pathFinderPath.cost>pathFinderPath.cost&&(result={roomObject:roomObject,pathFinderPath:pathFinderPath}))}return result}}exports.AttackHelperFunctions=AttackHelperFunctions},
/*!*********************************************!*\
  !*** ./ts-dist/empire/role/attack-creep.js ***!
  \*********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const report_controller_1=__webpack_require__(/*! ../../reporting/report-controller */0),constants_1=__webpack_require__(/*! ../../global/constants */3);exports.RoleAttackCreep=class{static run(attackCreep,attackState,rallyOrRoomTargetFlag,attackTarget){const creep=Game.creeps[attackCreep.name];null!=creep?"Rally"===attackState||"Conscripting"===attackState?(creep.moveTo(rallyOrRoomTargetFlag.pos),creep.pos.inRangeTo(rallyOrRoomTargetFlag.pos,constants_1.Constants.RALLY_FLAG_RANGE)?creep.say("Rallying"):creep.say("Moving")):"Charge"===attackState&&(creep.room.name!==rallyOrRoomTargetFlag.pos.roomName?(creep.say("Charge!"),creep.moveTo(rallyOrRoomTargetFlag.pos)):this.attackLogic(creep,attackTarget)):report_controller_1.ReportController.log("ERROR","Attack Creep is null. Creep ID: "+attackCreep.name)}static attackLogic(creep,attackTarget){null==attackTarget?creep.say("No target!"):(creep.say("⚔️"+attackTarget.type),creep.pos.inRangeTo(attackTarget.roomObject.pos,1)?creep.attack(attackTarget.roomObject):creep.moveTo(attackTarget.roomObject.pos))}}},
/*!*****************************************!*\
  !*** ./ts-dist/room/room-controller.js ***!
  \*****************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const tower_1=__webpack_require__(/*! ./structures/tower */8),miner_1=__webpack_require__(/*! ./roles/miner */9),hauler_1=__webpack_require__(/*! ./roles/hauler */10),room_stage_controller_1=__webpack_require__(/*! ./room-stage-controller */11),laborer_1=__webpack_require__(/*! ./roles/laborer */34),room_spawn_controller_1=__webpack_require__(/*! ./spawns/room-spawn-controller */35),bank_linker_1=__webpack_require__(/*! ./roles/bank-linker */40),source_link_1=__webpack_require__(/*! ./structures/source-link */41),report_controller_1=__webpack_require__(/*! ../reporting/report-controller */0);exports.RoomController=class{static run(myRoom){if(null==Game.rooms[myRoom.name])return void report_controller_1.ReportController.log("ERROR","No longer have vision of room "+myRoom.name);const room=Game.rooms[myRoom.name];room_stage_controller_1.RoomStageController.run(myRoom),room_spawn_controller_1.RoomSpawnController.run(myRoom);const towers=room.find(FIND_STRUCTURES,{filter:{structureType:STRUCTURE_TOWER,my:!0}});for(let i=0;i<towers.length;i++)tower_1.RoomTowerController.run(towers[i]);for(let i=0;i<myRoom.myCreeps.length;i++){const myCreep=myRoom.myCreeps[i];"Miner"===myCreep.role?miner_1.RoleMiner.run(myCreep):"Hauler"===myCreep.role?hauler_1.RoleHauler.run(myCreep,myRoom):"Laborer"===myCreep.role?laborer_1.RoleLaborer.run(myCreep,myRoom):"BankLinker"===myCreep.role&&bank_linker_1.RoleBankLinker.run(myCreep,myRoom)}for(let i=0;i<myRoom.mySources.length;i++){const mySource=myRoom.mySources[i];null!=mySource.link&&source_link_1.RoomSourceLinkController.run(myRoom,mySource.link)}}}},
/*!******************************************!*\
  !*** ./ts-dist/room/structures/tower.js ***!
  \******************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const helper_functions_1=__webpack_require__(/*! ../../global/helper-functions */1),constants_1=__webpack_require__(/*! ../../global/constants */3),report_controller_1=__webpack_require__(/*! ../../reporting/report-controller */0);exports.RoomTowerController=class{static run(tower){const hostileCreeps=tower.room.find(FIND_HOSTILE_CREEPS);if(hostileCreeps.length>=1){for(let i=hostileCreeps.length-1;i>=0;i--){const possibleHostileCreep=hostileCreeps[i];helper_functions_1.HelperFunctions.isAllyUsername(possibleHostileCreep.owner.username)&&hostileCreeps.splice(i,1)}let target=null;for(let i=0;i<hostileCreeps.length;i++){const hostileCreep=hostileCreeps[i];let healer=!1;for(let j=0;j<hostileCreep.body.length;j++)if(hostileCreep.body[j].type===HEAL){healer=!0;break}if(healer){target=hostileCreep;break}null==target&&(target=hostileCreep)}if(null!=target)return tower.attack(target),void("Invader"!==target.owner.username&&report_controller_1.ReportController.log("DEFENCE","Tower attacking target with name "+target.name+" Owner: "+target.owner.username))}const closestDamagedStructure=tower.pos.findClosestByRange(FIND_STRUCTURES,{filter:structure=>structure.structureType!==STRUCTURE_WALL&&structure.structureType!==STRUCTURE_RAMPART?structure.hits<structure.hitsMax:structure.hits<constants_1.Constants.WALL_AND_RAMPART_GOAL_HEALTH});null!=closestDamagedStructure&&tower.energy>=tower.energyCapacity*constants_1.Constants.TOWER_REPAIR_ABOVE_PERCENT&&tower.repair(closestDamagedStructure)}}},
/*!*************************************!*\
  !*** ./ts-dist/room/roles/miner.js ***!
  \*************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const helper_functions_1=__webpack_require__(/*! ../../global/helper-functions */1),report_controller_1=__webpack_require__(/*! ../../reporting/report-controller */0);exports.RoleMiner=class{static run(miner){const creep=Game.creeps[miner.name];if(null==creep)return void report_controller_1.ReportController.log("ERROR","Miner creep is null. Creep ID: "+miner.name);if(miner.assignedRoomName!==creep.room.name)return creep.say("Fukn Lost"),void creep.moveTo(new RoomPosition(25,25,miner.assignedRoomName));const cachePos=helper_functions_1.HelperFunctions.myPosToRoomPos(miner.cachePosToMineOn);if(cachePos.isEqualTo(creep.pos)){const source=Game.getObjectById(miner.sourceId);if(null==source)return void report_controller_1.ReportController.log("ERROR","Miner has been given a source which is null. Creep ID: "+miner.name);if(creep.harvest(source),null!=miner.linkIdToDepositTo){const link=Game.getObjectById(miner.linkIdToDepositTo);if(null==link)return miner.linkIdToDepositTo=null,void report_controller_1.ReportController.log("ERROR","A miner's link ID to deposit in was null");creep.transfer(link,RESOURCE_ENERGY)}}else creep.moveTo(cachePos)}}},
/*!**************************************!*\
  !*** ./ts-dist/room/roles/hauler.js ***!
  \**************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const helper_functions_1=__webpack_require__(/*! ../../global/helper-functions */1),report_controller_1=__webpack_require__(/*! ../../reporting/report-controller */0);exports.RoleHauler=class{static run(hauler,myRoom){const creep=Game.creeps[hauler.name];if(null!=creep){if(hauler.assignedRoomName!==creep.room.name)return creep.say("Fukn Lost"),void creep.moveTo(new RoomPosition(25,25,hauler.assignedRoomName));if(!1===hauler.pickup&&0===creep.carry.energy?(hauler.pickup=!0,creep.say("pickup")):!0===hauler.pickup&&creep.carry.energy===creep.carryCapacity&&(hauler.pickup=!1,creep.say("delivering")),hauler.pickup){const cacheToGrabFromPos=helper_functions_1.HelperFunctions.myPosToRoomPos(hauler.cachePosToPickupFrom);if(cacheToGrabFromPos.isNearTo(creep)){let cacheToGrabFrom=null;const structures=cacheToGrabFromPos.lookFor(LOOK_STRUCTURES);for(let i=0;i<structures.length;i++){const structure=structures[i];structure.structureType===STRUCTURE_CONTAINER&&(cacheToGrabFrom=structure)}if(null==cacheToGrabFrom)return void report_controller_1.ReportController.log("ERROR","Source cache is null for hauler: "+hauler.name);creep.withdraw(cacheToGrabFrom,RESOURCE_ENERGY)}else creep.moveTo(cacheToGrabFromPos)}else{if(null==myRoom.bankPos)return void report_controller_1.ReportController.log("ERROR","Room's bank pos was null");const bankPos=helper_functions_1.HelperFunctions.myPosToRoomPos(myRoom.bankPos);if(bankPos.isNearTo(creep)){const bank=myRoom.bank;if(null==bank)return void report_controller_1.ReportController.log("ERROR","Room's bank was null");creep.transfer(bank,RESOURCE_ENERGY)}else creep.moveTo(bankPos)}}else report_controller_1.ReportController.log("ERROR","Hauler creep is null. Creep ID: "+hauler.name)}}},
/*!***********************************************!*\
  !*** ./ts-dist/room/room-stage-controller.js ***!
  \***********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const stage_default_1=__webpack_require__(/*! ./stages/stage-default */12),stage0_1=__webpack_require__(/*! ./stages/stage0 */13),stage0_5_1=__webpack_require__(/*! ./stages/stage0_5 */14),stage1_1=__webpack_require__(/*! ./stages/stage1 */15),stage1_3_1=__webpack_require__(/*! ./stages/stage1_3 */16),stage1_6_1=__webpack_require__(/*! ./stages/stage1_6 */17),stage2_1=__webpack_require__(/*! ./stages/stage2 */18),stage2_3_1=__webpack_require__(/*! ./stages/stage2_3 */19),stage2_6_1=__webpack_require__(/*! ./stages/stage2_6 */20),stage3_1=__webpack_require__(/*! ./stages/stage3 */21),stage3_3_1=__webpack_require__(/*! ./stages/stage3_3 */22),stage3_6_1=__webpack_require__(/*! ./stages/stage3_6 */23),stage4_1=__webpack_require__(/*! ./stages/stage4 */24),stage4_2_1=__webpack_require__(/*! ./stages/stage4_2 */25),stage4_4_1=__webpack_require__(/*! ./stages/stage4_4 */26),stage4_6_1=__webpack_require__(/*! ./stages/stage4_6 */27),stage4_8_1=__webpack_require__(/*! ./stages/stage4_8 */28),stage5_1=__webpack_require__(/*! ./stages/stage5 */29),stage5_2_1=__webpack_require__(/*! ./stages/stage5_2 */30),stage5_4_1=__webpack_require__(/*! ./stages/stage5_4 */31),stage5_6_1=__webpack_require__(/*! ./stages/stage5_6 */32),stage5_8_1=__webpack_require__(/*! ./stages/stage5_8 */33);exports.RoomStageController=class{static run(myRoom){if(Game.time%10!=0)return;const room=Game.rooms[myRoom.name];-1===myRoom.roomStage&&stage_default_1.StageDefault.up(myRoom,room),0===myRoom.roomStage&&stage0_1.Stage0.up(myRoom,room),.5===myRoom.roomStage&&stage0_5_1.Stage0_5.up(myRoom,room),1===myRoom.roomStage&&stage1_1.Stage1.up(myRoom,room),1.3===myRoom.roomStage&&stage1_3_1.Stage1_3.up(myRoom,room),1.6===myRoom.roomStage&&stage1_6_1.Stage1_6.up(myRoom,room),2===myRoom.roomStage&&stage2_1.Stage2.up(myRoom,room),2.3===myRoom.roomStage&&stage2_3_1.Stage2_3.up(myRoom,room),2.6===myRoom.roomStage&&stage2_6_1.Stage2_6.up(myRoom,room),3===myRoom.roomStage&&stage3_1.Stage3.up(myRoom,room),3.3===myRoom.roomStage&&stage3_3_1.Stage3_3.up(myRoom,room),3.6===myRoom.roomStage&&stage3_6_1.Stage3_6.up(myRoom,room),4===myRoom.roomStage&&stage4_1.Stage4.up(myRoom,room),4.2===myRoom.roomStage&&stage4_2_1.Stage4_2.up(myRoom,room),4.4===myRoom.roomStage&&stage4_4_1.Stage4_4.up(myRoom,room),4.6===myRoom.roomStage&&stage4_6_1.Stage4_6.up(myRoom,room),4.8===myRoom.roomStage&&stage4_8_1.Stage4_8.up(myRoom,room),5===myRoom.roomStage&&stage5_1.Stage5.up(myRoom,room),5.2===myRoom.roomStage&&stage5_2_1.Stage5_2.up(myRoom,room),5.4===myRoom.roomStage&&stage5_4_1.Stage5_4.up(myRoom,room),5.6===myRoom.roomStage&&stage5_6_1.Stage5_6.up(myRoom,room),5.8===myRoom.roomStage&&stage5_8_1.Stage5_8.up(myRoom,room),myRoom.roomStage>5.8&&stage5_8_1.Stage5_8.down(myRoom,room),myRoom.roomStage>5.6&&stage5_6_1.Stage5_6.down(myRoom,room),myRoom.roomStage>5.4&&stage5_4_1.Stage5_4.down(myRoom,room),myRoom.roomStage>5.2&&stage5_2_1.Stage5_2.down(myRoom,room),myRoom.roomStage>5&&stage5_1.Stage5.down(myRoom,room),myRoom.roomStage>4.8&&stage4_8_1.Stage4_8.down(myRoom,room),myRoom.roomStage>4.6&&stage4_6_1.Stage4_6.down(myRoom,room),myRoom.roomStage>4.4&&stage4_4_1.Stage4_4.down(myRoom,room),myRoom.roomStage>4.2&&stage4_2_1.Stage4_2.down(myRoom,room),myRoom.roomStage>4&&stage4_1.Stage4.down(myRoom,room),myRoom.roomStage>3.6&&stage3_6_1.Stage3_6.down(myRoom,room),myRoom.roomStage>3.3&&stage3_3_1.Stage3_3.down(myRoom,room),myRoom.roomStage>3&&stage3_1.Stage3.down(myRoom,room),myRoom.roomStage>2.6&&stage2_6_1.Stage2_6.down(myRoom,room),myRoom.roomStage>2.3&&stage2_3_1.Stage2_3.down(myRoom,room),myRoom.roomStage>2&&stage2_1.Stage2.down(myRoom,room),myRoom.roomStage>1.6&&stage1_6_1.Stage1_6.down(myRoom,room),myRoom.roomStage>1.3&&stage1_3_1.Stage1_3.down(myRoom,room),myRoom.roomStage>1&&stage1_1.Stage1.down(myRoom,room),myRoom.roomStage>.5&&stage0_5_1.Stage0_5.down(myRoom,room),myRoom.roomStage>0&&stage0_1.Stage0.down(myRoom,room),myRoom.roomStage>-1&&stage_default_1.StageDefault.down(myRoom,room)}}},
/*!**********************************************!*\
  !*** ./ts-dist/room/stages/stage-default.js ***!
  \**********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const report_controller_1=__webpack_require__(/*! ../../reporting/report-controller */0);exports.StageDefault=class{static up(myRoom,room){return null!=room.controller&&!0===room.controller.my&&(myRoom.roomStage=0,report_controller_1.ReportController.log("STAGE","Room "+myRoom.name+" increased to room stage 0"),!0)}static down(myRoom,room){return(null==room.controller||!1===room.controller.my)&&(myRoom.roomStage=-1,report_controller_1.ReportController.log("STAGE","Room "+myRoom.name+" decreased to room stage -1"),!0)}}},
/*!***************************************!*\
  !*** ./ts-dist/room/stages/stage0.js ***!
  \***************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const report_controller_1=__webpack_require__(/*! ../../reporting/report-controller */0);exports.Stage0=class{static up(myRoom,room){return null!=room.controller&&room.controller.level>=1&&(myRoom.roomStage=.5,report_controller_1.ReportController.log("STAGE","Room "+myRoom.name+" increased to room stage 0.5"),!0)}static down(myRoom,room){return(null==room.controller||room.controller.level<1)&&(myRoom.roomStage=0,report_controller_1.ReportController.log("STAGE","Room "+myRoom.name+" decreased to room stage 0"),!0)}}},
/*!*****************************************!*\
  !*** ./ts-dist/room/stages/stage0_5.js ***!
  \*****************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const helper_functions_1=__webpack_require__(/*! ../../global/helper-functions */1),report_controller_1=__webpack_require__(/*! ../../reporting/report-controller */0);exports.Stage0_5=class{static up(myRoom,room){return this.step(myRoom,room),helper_functions_1.HelperFunctions.amountOfExtensions(room,STRUCTURE_SPAWN)>=1&&(myRoom.roomStage=1,report_controller_1.ReportController.log("STAGE","Room "+myRoom.name+" increased to room stage 1"),!0)}static down(myRoom,room){return 0===helper_functions_1.HelperFunctions.amountOfExtensions(room,STRUCTURE_SPAWN)&&(myRoom.roomStage=.5,report_controller_1.ReportController.log("STAGE","Room "+myRoom.name+" decreased to room stage 0.5"),!0)}static step(myRoom,room){0===Game.rooms[myRoom.name].find(FIND_CONSTRUCTION_SITES).length&&console.log("ATTENTION: Room "+room.name+" needs first spawn, which should be manually placed")}}},
/*!***************************************!*\
  !*** ./ts-dist/room/stages/stage1.js ***!
  \***************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const report_controller_1=__webpack_require__(/*! ../../reporting/report-controller */0);exports.Stage1=class{static up(myRoom,room){return null!=room.controller&&room.controller.level>=2&&(myRoom.roomStage=1.3,report_controller_1.ReportController.log("STAGE","Room "+myRoom.name+" increased to room stage 1.3"),!0)}static down(myRoom,room){return(null==room.controller||room.controller.level<2)&&(myRoom.roomStage=1,report_controller_1.ReportController.log("STAGE","Room "+myRoom.name+" decreased to room stage 1"),!0)}}},
/*!*****************************************!*\
  !*** ./ts-dist/room/stages/stage1_3.js ***!
  \*****************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const helper_functions_1=__webpack_require__(/*! ../../global/helper-functions */1),stage_functions_1=__webpack_require__(/*! ./stage-functions */2),report_controller_1=__webpack_require__(/*! ../../reporting/report-controller */0);exports.Stage1_3=class{static up(myRoom,room){return this.step(myRoom,room),helper_functions_1.HelperFunctions.amountOfExtensions(room,STRUCTURE_EXTENSION)>=5&&(myRoom.roomStage=1.6,report_controller_1.ReportController.log("STAGE","Room "+myRoom.name+" increased to room stage 1.6"),!0)}static down(myRoom,room){return helper_functions_1.HelperFunctions.amountOfExtensions(room,STRUCTURE_EXTENSION)<5&&(myRoom.roomStage=1.3,report_controller_1.ReportController.log("STAGE","Room "+myRoom.name+" decreased to room stage 1.3"),!0)}static step(myRoom,room){stage_functions_1.StageFunctions.buildExtensions(myRoom,5)}}},
/*!*****************************************!*\
  !*** ./ts-dist/room/stages/stage1_6.js ***!
  \*****************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const helper_functions_1=__webpack_require__(/*! ../../global/helper-functions */1),report_controller_1=__webpack_require__(/*! ../../reporting/report-controller */0);exports.Stage1_6=class{static up(myRoom,room){this.step(myRoom,room);for(let i=0;i<myRoom.mySources.length;i++){const mySource=myRoom.mySources[i];if(!(null!=mySource.cache&&null!=mySource.cache.id||null!=mySource.link&&null!=mySource.link.id))return!1}return myRoom.roomStage=2,report_controller_1.ReportController.log("STAGE","Room "+myRoom.name+" increased to room stage 2"),!0}static down(myRoom,room){for(let i=0;i<myRoom.mySources.length;i++){const mySource=myRoom.mySources[i];if(!(null!=mySource.cache&&null!=mySource.cache.id||null!=mySource.link&&null!=mySource.link.id))return myRoom.roomStage=1.6,report_controller_1.ReportController.log("STAGE","Room "+myRoom.name+" decreased to room stage 1.6"),!0}return!1}static step(myRoom,room){const roomFlags=helper_functions_1.HelperFunctions.getRoomsFlags(myRoom);for(let i=roomFlags.length-1;i>=0;i--)"cont"!==roomFlags[i].name.split("-")[0]&&roomFlags.splice(i,1);let flagsPlaced=0;for(let i=0;i<roomFlags.length;i++){const roomFlag=roomFlags[i];if(Game.rooms[myRoom.name].createConstructionSite(roomFlag.pos,STRUCTURE_CONTAINER)===OK||this.containerInPos(roomFlag.pos)){let placedFully=!1;for(let j=0;j<myRoom.mySources.length;j++){const mySource=myRoom.mySources[j],source=Game.getObjectById(mySource.id);null==source?report_controller_1.ReportController.log("ERROR","Source was null when trying to get it by ID"):source.pos.inRangeTo(roomFlag.pos,1)&&(mySource.cache={pos:{x:roomFlag.pos.x,y:roomFlag.pos.y,roomName:myRoom.name},id:null},mySource.state="Cache",flagsPlaced++,placedFully=!0)}placedFully?(console.log("LOG: Placed container cache construction site"),roomFlag.remove()):report_controller_1.ReportController.log("ERROR","Placed a construction site at a flag but couldn't find a source to give it to")}else report_controller_1.ReportController.log("ERROR","Placing a container cache construction site errored")}for(let i=0;i<myRoom.mySources.length;i++){const mySource=myRoom.mySources[i];if(null!=mySource.cache&&null==mySource.cache.id){const structures=helper_functions_1.HelperFunctions.myPosToRoomPos(mySource.cache.pos).lookFor(LOOK_STRUCTURES);for(let j=0;j<structures.length;j++)if(structures[j].structureType===STRUCTURE_CONTAINER){mySource.cache.id=structures[j].id;break}}}flagsPlaced!==myRoom.mySources.length&&0===room.find(FIND_CONSTRUCTION_SITES).length&&console.log("ATTENTION: Room "+myRoom.name+" needs cache container flag")}static containerInPos(pos){const structures=pos.lookFor(LOOK_STRUCTURES);for(let j=0;j<structures.length;j++)if(structures[j].structureType===STRUCTURE_CONTAINER)return!0;return!1}}},
/*!***************************************!*\
  !*** ./ts-dist/room/stages/stage2.js ***!
  \***************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const report_controller_1=__webpack_require__(/*! ../../reporting/report-controller */0);exports.Stage2=class{static up(myRoom,room){return null!=room.controller&&room.controller.level>=3&&(myRoom.roomStage=2.3,report_controller_1.ReportController.log("STAGE","Room "+myRoom.name+" increased to room stage 2.3"),!0)}static down(myRoom,room){return(null==room.controller||room.controller.level<3)&&(myRoom.roomStage=2,report_controller_1.ReportController.log("STAGE","Room "+myRoom.name+" decreased to room stage 2"),!0)}}},
/*!*****************************************!*\
  !*** ./ts-dist/room/stages/stage2_3.js ***!
  \*****************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const helper_functions_1=__webpack_require__(/*! ../../global/helper-functions */1),stage_functions_1=__webpack_require__(/*! ./stage-functions */2),report_controller_1=__webpack_require__(/*! ../../reporting/report-controller */0);exports.Stage2_3=class{static up(myRoom,room){return this.step(myRoom,room),helper_functions_1.HelperFunctions.amountOfExtensions(room,STRUCTURE_TOWER)>=1&&(myRoom.roomStage=2.6,report_controller_1.ReportController.log("STAGE","Room "+myRoom.name+" increased to room stage 2.6"),!0)}static down(myRoom,room){return helper_functions_1.HelperFunctions.amountOfExtensions(room,STRUCTURE_TOWER)<1&&(myRoom.roomStage=2.3,report_controller_1.ReportController.log("STAGE","Room "+myRoom.name+" decreased to room stage 2.3"),!0)}static step(myRoom,room){stage_functions_1.StageFunctions.buildTowers(myRoom,1)}}},
/*!*****************************************!*\
  !*** ./ts-dist/room/stages/stage2_6.js ***!
  \*****************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const helper_functions_1=__webpack_require__(/*! ../../global/helper-functions */1),stage_functions_1=__webpack_require__(/*! ./stage-functions */2),report_controller_1=__webpack_require__(/*! ../../reporting/report-controller */0);exports.Stage2_6=class{static up(myRoom,room){return this.step(myRoom,room),helper_functions_1.HelperFunctions.amountOfExtensions(room,STRUCTURE_EXTENSION)>=10&&(myRoom.roomStage=3,report_controller_1.ReportController.log("STAGE","Room "+myRoom.name+" increased to room stage 3"),!0)}static down(myRoom,room){return helper_functions_1.HelperFunctions.amountOfExtensions(room,STRUCTURE_EXTENSION)<10&&(myRoom.roomStage=2.6,report_controller_1.ReportController.log("STAGE","Room "+myRoom.name+" decreased to room stage 2.6"),!0)}static step(myRoom,room){stage_functions_1.StageFunctions.buildExtensions(myRoom,10)}}},
/*!***************************************!*\
  !*** ./ts-dist/room/stages/stage3.js ***!
  \***************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const report_controller_1=__webpack_require__(/*! ../../reporting/report-controller */0);exports.Stage3=class{static up(myRoom,room){return null!=room.controller&&room.controller.level>=4&&(myRoom.roomStage=3.3,report_controller_1.ReportController.log("STAGE","Room "+myRoom.name+" increased to room stage 3.3"),!0)}static down(myRoom,room){return(null==room.controller||room.controller.level<4)&&(myRoom.roomStage=3,report_controller_1.ReportController.log("STAGE","Room "+myRoom.name+" decreased to room stage 3"),!0)}}},
/*!*****************************************!*\
  !*** ./ts-dist/room/stages/stage3_3.js ***!
  \*****************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const helper_functions_1=__webpack_require__(/*! ../../global/helper-functions */1),stage_functions_1=__webpack_require__(/*! ./stage-functions */2),report_controller_1=__webpack_require__(/*! ../../reporting/report-controller */0);exports.Stage3_3=class{static up(myRoom,room){return this.step(myRoom,room),helper_functions_1.HelperFunctions.amountOfExtensions(room,STRUCTURE_EXTENSION)>=20&&(myRoom.roomStage=3.6,report_controller_1.ReportController.log("STAGE","Room "+myRoom.name+" increased to room stage 3.6"),!0)}static down(myRoom,room){return helper_functions_1.HelperFunctions.amountOfExtensions(room,STRUCTURE_EXTENSION)<20&&(myRoom.roomStage=3.3,report_controller_1.ReportController.log("STAGE","Room "+myRoom.name+" decreased to room stage 3.3"),!0)}static step(myRoom,room){stage_functions_1.StageFunctions.buildExtensions(myRoom,20)}}},
/*!*****************************************!*\
  !*** ./ts-dist/room/stages/stage3_6.js ***!
  \*****************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const helper_functions_1=__webpack_require__(/*! ../../global/helper-functions */1),report_controller_1=__webpack_require__(/*! ../../reporting/report-controller */0);exports.Stage3_6=class{static up(myRoom,room){return this.step(myRoom,room),helper_functions_1.HelperFunctions.amountOfExtensions(room,STRUCTURE_STORAGE)>=1&&(myRoom.roomStage=4,report_controller_1.ReportController.log("STAGE","Room "+myRoom.name+" increased to room stage 4"),!0)}static down(myRoom,room){return helper_functions_1.HelperFunctions.amountOfExtensions(room,STRUCTURE_STORAGE)<1&&(myRoom.roomStage=3.6,report_controller_1.ReportController.log("STAGE","Room "+myRoom.name+" decreased to room stage 3.6"),!0)}static step(myRoom,room){const storage=room.find(FIND_STRUCTURES,{filter:structure=>structure.structureType===STRUCTURE_STORAGE});if(1===storage.length)return void(myRoom.bankPos={x:storage[0].pos.x,y:storage[0].pos.y,roomName:myRoom.name});const roomFlags=helper_functions_1.HelperFunctions.getRoomsFlags(myRoom);for(let i=0;i<roomFlags.length;i++){const roomFlag=roomFlags[i];"storage"===roomFlag.name.split("-")[0]&&(Game.rooms[myRoom.name].createConstructionSite(roomFlag.pos,STRUCTURE_STORAGE)===OK?(console.log("LOG: Placed storage bank construction site"),roomFlag.remove()):report_controller_1.ReportController.log("ERROR","Placing a storage bank construction site errored"))}}}},
/*!***************************************!*\
  !*** ./ts-dist/room/stages/stage4.js ***!
  \***************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const report_controller_1=__webpack_require__(/*! ../../reporting/report-controller */0);exports.Stage4=class{static up(myRoom,room){return null!=room.controller&&room.controller.level>=5&&(myRoom.roomStage=4.2,report_controller_1.ReportController.log("STAGE","Room "+myRoom.name+" increased to room stage 4.2"),!0)}static down(myRoom,room){return(null==room.controller||room.controller.level<5)&&(myRoom.roomStage=4,report_controller_1.ReportController.log("STAGE","Room "+myRoom.name+" decreased to room stage 4"),!0)}}},
/*!*****************************************!*\
  !*** ./ts-dist/room/stages/stage4_2.js ***!
  \*****************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const helper_functions_1=__webpack_require__(/*! ../../global/helper-functions */1),stage_functions_1=__webpack_require__(/*! ./stage-functions */2),report_controller_1=__webpack_require__(/*! ../../reporting/report-controller */0);exports.Stage4_2=class{static up(myRoom,room){return this.step(myRoom,room),helper_functions_1.HelperFunctions.amountOfExtensions(room,STRUCTURE_TOWER)>=2&&(myRoom.roomStage=4.4,report_controller_1.ReportController.log("STAGE","Room "+myRoom.name+" increased to room stage 4.4"),!0)}static down(myRoom,room){return helper_functions_1.HelperFunctions.amountOfExtensions(room,STRUCTURE_TOWER)<2&&(myRoom.roomStage=4.2,report_controller_1.ReportController.log("STAGE","Room "+myRoom.name+" decreased to room stage 4.2"),!0)}static step(myRoom,room){stage_functions_1.StageFunctions.buildTowers(myRoom,2)}}},
/*!*****************************************!*\
  !*** ./ts-dist/room/stages/stage4_4.js ***!
  \*****************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const helper_functions_1=__webpack_require__(/*! ../../global/helper-functions */1),stage_functions_1=__webpack_require__(/*! ./stage-functions */2),report_controller_1=__webpack_require__(/*! ../../reporting/report-controller */0);exports.Stage4_4=class{static up(myRoom,room){return this.step(myRoom,room),helper_functions_1.HelperFunctions.amountOfExtensions(room,STRUCTURE_EXTENSION)>=30&&(myRoom.roomStage=4.6,report_controller_1.ReportController.log("STAGE","Room "+myRoom.name+" increased to room stage 4.6"),!0)}static down(myRoom,room){return helper_functions_1.HelperFunctions.amountOfExtensions(room,STRUCTURE_EXTENSION)<30&&(myRoom.roomStage=4.4,report_controller_1.ReportController.log("STAGE","Room "+myRoom.name+" decreased to room stage 4.4"),!0)}static step(myRoom,room){stage_functions_1.StageFunctions.buildExtensions(myRoom,30)}}},
/*!*****************************************!*\
  !*** ./ts-dist/room/stages/stage4_6.js ***!
  \*****************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const helper_functions_1=__webpack_require__(/*! ../../global/helper-functions */1),stage_functions_1=__webpack_require__(/*! ./stage-functions */2),report_controller_1=__webpack_require__(/*! ../../reporting/report-controller */0);exports.Stage4_6=class{static up(myRoom,room){return this.step(myRoom,room),helper_functions_1.HelperFunctions.amountOfExtensions(room,STRUCTURE_LINK)>=2&&(myRoom.roomStage=4.8,report_controller_1.ReportController.log("STAGE","Room "+myRoom.name+" increased to room stage 4.8"),!0)}static down(myRoom,room){return helper_functions_1.HelperFunctions.amountOfExtensions(room,STRUCTURE_LINK)<2&&(myRoom.roomStage=4.6,report_controller_1.ReportController.log("STAGE","Room "+myRoom.name+" decreased to room stage 4.6"),!0)}static step(myRoom,room){const roomFlags=helper_functions_1.HelperFunctions.getRoomsFlags(myRoom);for(let i=roomFlags.length-1;i>=0;i--){const flagNameSplit=roomFlags[i].name.split("-");"link"===flagNameSplit[0]&&"bank"===flagNameSplit[1]||roomFlags.splice(i,1)}let placedBankLink=!1;for(let i=0;i<roomFlags.length;i++){const roomFlag=roomFlags[i];Game.rooms[myRoom.name].createConstructionSite(roomFlag.pos,STRUCTURE_LINK)===OK?(myRoom.bankLink={pos:helper_functions_1.HelperFunctions.roomPosToMyPos(roomFlag.pos),id:null},roomFlag.remove(),placedBankLink=!0,console.log("LOG: Placed a bank link construction site")):report_controller_1.ReportController.log("ERROR","Placing a bank link construction site errored")}if(null!=myRoom.bankLink){const structures=helper_functions_1.HelperFunctions.myPosToRoomPos(myRoom.bankLink.pos).lookFor(LOOK_STRUCTURES);for(let j=0;j<structures.length;j++)if(structures[j].structureType===STRUCTURE_LINK){myRoom.bankLink.id=structures[j].id;break}}placedBankLink||0!==Game.rooms[myRoom.name].find(FIND_CONSTRUCTION_SITES).length||console.log("ATTENTION: Room "+myRoom.name+" needs bank link flag (link-bank-X)"),stage_functions_1.StageFunctions.setupSourceLink(myRoom),stage_functions_1.StageFunctions.setupOutLink(myRoom)}}},
/*!*****************************************!*\
  !*** ./ts-dist/room/stages/stage4_8.js ***!
  \*****************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const stage_functions_1=__webpack_require__(/*! ./stage-functions */2),report_controller_1=__webpack_require__(/*! ../../reporting/report-controller */0);exports.Stage4_8=class{static up(myRoom,room){this.step(myRoom,room);for(let i=0;i<myRoom.mySources.length;i++){const mySource=myRoom.mySources[i];if("Link"===mySource.state&&null!=mySource.link&&null!=mySource.link.id&&null!=mySource.cache&&null==mySource.cache.id&&0===mySource.haulerNames.length)return myRoom.roomStage=5,report_controller_1.ReportController.log("STAGE","Room "+myRoom.name+" increased to room stage 5"),!0}return!1}static down(myRoom,room){let foundLinkedSource=!1;for(let i=0;i<myRoom.mySources.length;i++){const mySource=myRoom.mySources[i];if("Link"===mySource.state&&null!=mySource.link&&null!=mySource.link.id&&null!=mySource.cache&&null==mySource.cache.id&&0===mySource.haulerNames.length){foundLinkedSource=!0;break}}return!foundLinkedSource&&(myRoom.roomStage=4.8,report_controller_1.ReportController.log("STAGE","Room "+myRoom.name+" decreased to room stage 4.8"),!0)}static step(myRoom,room){stage_functions_1.StageFunctions.clearHaulersAndCaches(myRoom)}}},
/*!***************************************!*\
  !*** ./ts-dist/room/stages/stage5.js ***!
  \***************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const report_controller_1=__webpack_require__(/*! ../../reporting/report-controller */0);exports.Stage5=class{static up(myRoom,room){return null!=room.controller&&room.controller.level>=6&&(myRoom.roomStage=5.2,report_controller_1.ReportController.log("STAGE","Room "+myRoom.name+" increased to room stage 5.2"),!0)}static down(myRoom,room){return(null==room.controller||room.controller.level<6)&&(myRoom.roomStage=5,report_controller_1.ReportController.log("STAGE","Room "+myRoom.name+" decreased to room stage 5"),!0)}}},
/*!*****************************************!*\
  !*** ./ts-dist/room/stages/stage5_2.js ***!
  \*****************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const helper_functions_1=__webpack_require__(/*! ../../global/helper-functions */1),stage_functions_1=__webpack_require__(/*! ./stage-functions */2),report_controller_1=__webpack_require__(/*! ../../reporting/report-controller */0);exports.Stage5_2=class{static up(myRoom,room){return this.step(myRoom,room),helper_functions_1.HelperFunctions.amountOfExtensions(room,STRUCTURE_LINK)>=3&&(myRoom.roomStage=5.4,report_controller_1.ReportController.log("STAGE","Room "+myRoom.name+" increased to room stage 5.4"),!0)}static down(myRoom,room){return helper_functions_1.HelperFunctions.amountOfExtensions(room,STRUCTURE_LINK)<3&&(myRoom.roomStage=5.2,report_controller_1.ReportController.log("STAGE","Room "+myRoom.name+" decreased to room stage 5.2"),!0)}static step(myRoom,room){stage_functions_1.StageFunctions.setupSourceLink(myRoom),stage_functions_1.StageFunctions.setupOutLink(myRoom),stage_functions_1.StageFunctions.clearHaulersAndCaches(myRoom)}}},
/*!*****************************************!*\
  !*** ./ts-dist/room/stages/stage5_4.js ***!
  \*****************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const helper_functions_1=__webpack_require__(/*! ../../global/helper-functions */1),stage_functions_1=__webpack_require__(/*! ./stage-functions */2),report_controller_1=__webpack_require__(/*! ../../reporting/report-controller */0);exports.Stage5_4=class{static up(myRoom,room){return this.step(myRoom,room),helper_functions_1.HelperFunctions.amountOfExtensions(room,STRUCTURE_EXTENSION)>=40&&(myRoom.roomStage=5.6,report_controller_1.ReportController.log("STAGE","Room "+myRoom.name+" increased to room stage 5.6"),!0)}static down(myRoom,room){return helper_functions_1.HelperFunctions.amountOfExtensions(room,STRUCTURE_EXTENSION)<40&&(myRoom.roomStage=5.4,report_controller_1.ReportController.log("STAGE","Room "+myRoom.name+" decreased to room stage 5.4"),!0)}static step(myRoom,room){stage_functions_1.StageFunctions.buildExtensions(myRoom,40)}}},
/*!*****************************************!*\
  !*** ./ts-dist/room/stages/stage5_6.js ***!
  \*****************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const helper_functions_1=__webpack_require__(/*! ../../global/helper-functions */1),report_controller_1=__webpack_require__(/*! ../../reporting/report-controller */0);exports.Stage5_6=class{static up(myRoom,room){return this.step(myRoom,room),helper_functions_1.HelperFunctions.amountOfExtensions(room,STRUCTURE_EXTRACTOR)>=1&&(myRoom.roomStage=5.8,report_controller_1.ReportController.log("STAGE","Room "+myRoom.name+" increased to room stage 5.8"),!0)}static down(myRoom,room){return helper_functions_1.HelperFunctions.amountOfExtensions(room,STRUCTURE_EXTRACTOR)<1&&(myRoom.roomStage=5.6,report_controller_1.ReportController.log("STAGE","Room "+myRoom.name+" decreased to room stage 5.6"),!0)}static step(myRoom,room){let placedExtractor=!1;const minerals=room.find(FIND_MINERALS);1===minerals.length&&minerals[0].pos.createConstructionSite(STRUCTURE_EXTRACTOR)===OK&&(placedExtractor=!0),placedExtractor||0!==room.find(FIND_CONSTRUCTION_SITES).length||console.log("ATTENTION: Room "+myRoom.name+" couldn't place an extractor")}}},
/*!*****************************************!*\
  !*** ./ts-dist/room/stages/stage5_8.js ***!
  \*****************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const helper_functions_1=__webpack_require__(/*! ../../global/helper-functions */1),report_controller_1=__webpack_require__(/*! ../../reporting/report-controller */0);exports.Stage5_8=class{static up(myRoom,room){return this.step(myRoom,room),helper_functions_1.HelperFunctions.amountOfExtensions(room,STRUCTURE_TERMINAL)>=1&&(myRoom.roomStage=5.9,report_controller_1.ReportController.log("STAGE","Room "+myRoom.name+" increased to room stage 5.9"),!0)}static down(myRoom,room){return helper_functions_1.HelperFunctions.amountOfExtensions(room,STRUCTURE_TERMINAL)<1&&(myRoom.roomStage=5.8,report_controller_1.ReportController.log("STAGE","Room "+myRoom.name+" decreased to room stage 5.8"),!0)}static step(myRoom,room){const roomFlags=helper_functions_1.HelperFunctions.getRoomsFlags(myRoom);for(let i=roomFlags.length-1;i>=0;i--)"terminal"!==roomFlags[i].name.split("-")[0]&&roomFlags.splice(i,1);let placedTerminal=!1;1===roomFlags.length&&roomFlags[0].pos.createConstructionSite(STRUCTURE_TERMINAL)===OK&&(placedTerminal=!0,roomFlags[0].remove()),placedTerminal||0!==room.find(FIND_CONSTRUCTION_SITES).length||console.log("ATTENTION: Room "+myRoom.name+" needs a terminal flag (terminal)")}}},
/*!***************************************!*\
  !*** ./ts-dist/room/roles/laborer.js ***!
  \***************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const helper_functions_1=__webpack_require__(/*! ../../global/helper-functions */1),report_controller_1=__webpack_require__(/*! ../../reporting/report-controller */0);exports.RoleLaborer=class{static run(laborer,myRoom){const creep=Game.creeps[laborer.name];if(null!=creep){if(laborer.assignedRoomName!==creep.room.name)return creep.say("Fukn Lost"),void creep.moveTo(new RoomPosition(25,25,laborer.assignedRoomName));this.calculateCreepState(laborer,myRoom,creep),"PickupBank"===laborer.state?this.pickupBank(laborer,myRoom,creep):"PickupCache"===laborer.state?this.pickupCache(laborer,myRoom,creep):"PickupOutLink"===laborer.state?this.pickupOutLink(laborer,myRoom,creep):"Mining"===laborer.state?this.mining(laborer,myRoom,creep):this.labor(laborer,myRoom,creep)}else report_controller_1.ReportController.log("ERROR","Laborer creep is null. Creep ID: "+laborer.name)}static calculateCreepState(laborer,myRoom,creep){if("Labor"===laborer.state&&0===creep.carry.energy){let shortestOutLinkDistance=9999;for(let i=0;i<myRoom.outLinks.length;i++){const myOutLink=myRoom.outLinks[i];if(null==myOutLink.id)continue;const outLink=Game.getObjectById(myOutLink.id);if(null==outLink||outLink.energy<creep.carryCapacity)continue;const distanceToOutLink=creep.pos.findPathTo(outLink.pos).length;shortestOutLinkDistance>distanceToOutLink&&(shortestOutLinkDistance=distanceToOutLink)}const bank=myRoom.bank;if(null!=bank&&bank.store[RESOURCE_ENERGY]>=creep.carryCapacity)return shortestOutLinkDistance<creep.pos.findPathTo(bank.pos).length?(laborer.state="PickupOutLink",void creep.say("PickupOutLink")):(laborer.state="PickupBank",void creep.say("PickupBank"));if(myRoom.roomStage>=1){for(let i=0;i<myRoom.mySources.length;i++){const mySource=myRoom.mySources[i];if(null!=mySource.cache&&null!=mySource.cache.id){const cache=Game.getObjectById(mySource.cache.id);if(null==cache)mySource.cache.id=null,report_controller_1.ReportController.log("ERROR","Source cache returned null with get by ID");else if(cache.store[RESOURCE_ENERGY]>=creep.carryCapacity)return laborer.state="PickupCache",void creep.say("PickupCache")}}return laborer.state="Mining",void creep.say("Mining")}return laborer.state="Mining",void creep.say("Mining")}"Labor"!==laborer.state&&creep.carry.energy===creep.carryCapacity&&(laborer.state="Labor",creep.say("work work"))}static pickupBank(laborer,myRoom,creep){if(null==myRoom.bankPos)return void report_controller_1.ReportController.log("ERROR","Room's bank pos was null");const bankPos=helper_functions_1.HelperFunctions.myPosToRoomPos(myRoom.bankPos);if(bankPos.isNearTo(creep)){const bank=myRoom.bank;if(null==bank)return void report_controller_1.ReportController.log("ERROR","Room's bank was null");creep.withdraw(bank,RESOURCE_ENERGY)}else creep.moveTo(bankPos)}static pickupCache(laborer,myRoom,creep){const validCacheToGrabFrom=creep.pos.findClosestByPath(FIND_STRUCTURES,{filter:structure=>structure.structureType===STRUCTURE_CONTAINER&&structure.store[RESOURCE_ENERGY]>=creep.carryCapacity});null==validCacheToGrabFrom?(laborer.state="Mining",creep.say("Mining")):validCacheToGrabFrom.pos.isNearTo(creep)?creep.withdraw(validCacheToGrabFrom,RESOURCE_ENERGY):creep.moveTo(validCacheToGrabFrom.pos)}static pickupOutLink(laborer,myRoom,creep){const outLinkIds=[];for(let i=0;i<myRoom.outLinks.length;i++){const myOutLink=myRoom.outLinks[i];null!=myOutLink.id&&outLinkIds.push(myOutLink.id)}const closestOutLink=creep.pos.findClosestByPath(FIND_STRUCTURES,{filter:structure=>structure.structureType===STRUCTURE_LINK&&-1!==outLinkIds.indexOf(structure.id)});null==closestOutLink?(laborer.state="Mining",creep.say("Mining")):closestOutLink.pos.isNearTo(creep)?creep.withdraw(closestOutLink,RESOURCE_ENERGY):creep.moveTo(closestOutLink.pos)}static mining(laborer,myRoom,creep){const source=creep.pos.findClosestByPath(FIND_SOURCES_ACTIVE);null!=source&&creep.harvest(source)===ERR_NOT_IN_RANGE&&creep.moveTo(source)}static labor(laborer,myRoom,creep){let givenCommand=!1,forceUpgradeController=!1;if(null!=creep.room.controller&&creep.room.controller.ticksToDowngrade<5e3&&(forceUpgradeController=!0,givenCommand=!0),!givenCommand){const structureToAddTo=creep.pos.findClosestByPath(FIND_STRUCTURES,{filter:structure=>(structure.structureType===STRUCTURE_EXTENSION||structure.structureType===STRUCTURE_SPAWN||structure.structureType===STRUCTURE_TOWER)&&structure.energy<structure.energyCapacity});null!=structureToAddTo&&(givenCommand=!0,creep.transfer(structureToAddTo,RESOURCE_ENERGY)===ERR_NOT_IN_RANGE&&creep.moveTo(structureToAddTo))}if(!givenCommand){const closestConstructionSite=creep.pos.findClosestByPath(FIND_CONSTRUCTION_SITES);null!=closestConstructionSite&&(givenCommand=!0,creep.build(closestConstructionSite)===ERR_NOT_IN_RANGE&&creep.moveTo(closestConstructionSite))}!forceUpgradeController&&givenCommand||creep.upgradeController(creep.room.controller)!==ERR_NOT_IN_RANGE||creep.moveTo(creep.room.controller)}}},
/*!******************************************************!*\
  !*** ./ts-dist/room/spawns/room-spawn-controller.js ***!
  \******************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const spawn_laborer_1=__webpack_require__(/*! ./spawn-laborer */36),spawn_miner_1=__webpack_require__(/*! ./spawn-miner */37),spawn_hauler_1=__webpack_require__(/*! ./spawn-hauler */38),constants_1=__webpack_require__(/*! ../../global/constants */3),spawn_bank_linker_1=__webpack_require__(/*! ./spawn-bank-linker */39);exports.RoomSpawnController=class{static run(myRoom){let laborerCount=0;for(let i=0;i<myRoom.myCreeps.length;i++)"Laborer"===myRoom.myCreeps[i].role&&laborerCount++;let forceSpawnlaborers=!1;laborerCount<constants_1.Constants.MIN_LABORERS?forceSpawnlaborers=!0:laborerCount<constants_1.Constants.LABORERS_BEFORE_BANK&&myRoom.roomStage<4&&(forceSpawnlaborers=!0),forceSpawnlaborers?spawn_laborer_1.SpawnLaborer.forceSpawnLaborer(myRoom):(myRoom.pendingConscriptedCreep||spawn_laborer_1.SpawnLaborer.trySpawnLaborer(myRoom,laborerCount),spawn_miner_1.SpawnMiner.trySpawnMiner(myRoom),spawn_hauler_1.SpawnHauler.trySpawnHauler(myRoom),spawn_bank_linker_1.SpawnBankLinker.run(myRoom))}}},
/*!**********************************************!*\
  !*** ./ts-dist/room/spawns/spawn-laborer.js ***!
  \**********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const helper_functions_1=__webpack_require__(/*! ../../global/helper-functions */1),constants_1=__webpack_require__(/*! ../../global/constants */3),report_controller_1=__webpack_require__(/*! ../../reporting/report-controller */0);exports.SpawnLaborer=class{static trySpawnLaborer(myRoom,laborerCount){if(null==myRoom.bankPos)return;const bank=myRoom.bank;if(null!=bank){if(bank.store[RESOURCE_ENERGY]>=constants_1.Constants.AMOUNT_OF_BANK_ENERGY_TO_SPAWN_LABORER&&laborerCount<constants_1.Constants.MAX_LABORERS){const newCreep=this.spawnLaborer(myRoom);null!=newCreep&&(myRoom.myCreeps.push(newCreep),console.log("LOG: Spawned a new Laborer"))}}else report_controller_1.ReportController.log("ERROR","Bank is null when checking if it's full")}static forceSpawnLaborer(myRoom){const newCreep=this.spawnLaborer(myRoom);null!=newCreep&&(myRoom.myCreeps.push(newCreep),console.log("LOG: Force spawned a new Laborer"))}static spawnLaborer(myRoom){let spawn;if(0===myRoom.spawns.length||null==Game.spawns[myRoom.spawns[0].name]){if(null==(spawn=helper_functions_1.HelperFunctions.findClosestSpawn(new RoomPosition(25,25,myRoom.name))))return report_controller_1.ReportController.log("ERROR","Couldn't find any spawns to make a laborer for room "+myRoom.name),null}else spawn=Game.spawns[myRoom.spawns[0].name];const body=helper_functions_1.HelperFunctions.generateBody([MOVE,MOVE,CARRY,WORK],[MOVE,MOVE,CARRY,WORK],spawn.room,!1),id=helper_functions_1.HelperFunctions.getId();return spawn.spawnCreep(body,"Creep"+id,{memory:{name:"Creep"+id,role:"Laborer",assignedRoomName:myRoom.name}})===OK?{name:"Creep"+id,role:"Laborer",assignedRoomName:myRoom.name,state:"Labor"}:null}}},
/*!********************************************!*\
  !*** ./ts-dist/room/spawns/spawn-miner.js ***!
  \********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const helper_functions_1=__webpack_require__(/*! ../../global/helper-functions */1),report_controller_1=__webpack_require__(/*! ../../reporting/report-controller */0);exports.SpawnMiner=class{static trySpawnMiner(myRoom){if(!(myRoom.roomStage<2))for(let i=0;i<myRoom.mySources.length;i++){const mySource=myRoom.mySources[i];if(null==mySource.minerName){const newCreep=this.spawnMiner(myRoom,mySource);if(null!=newCreep)return myRoom.myCreeps.push(newCreep),void console.log("LOG: Spawned a new Miner")}}}static spawnMiner(myRoom,mySource){if(0===myRoom.spawns.length)return report_controller_1.ReportController.log("ERROR","Attempted to spawn miner in a room with no spawner (1)"),null;const spawn=Game.spawns[myRoom.spawns[0].name];if(null==spawn)return report_controller_1.ReportController.log("ERROR","Attempted to spawn miner in a room with no spawner (2)"),null;if(null==mySource.cache)return report_controller_1.ReportController.log("ERROR","Attempted to spawn miner to a source with no cache container pos"),null;let body,linkId=null;null!=mySource.link?(linkId=mySource.link.id,body=helper_functions_1.HelperFunctions.generateBody([MOVE,CARRY,WORK,WORK,WORK,WORK,WORK],[MOVE],Game.rooms[myRoom.name],!1,11)):body=helper_functions_1.HelperFunctions.generateBody([MOVE,WORK,WORK,WORK,WORK,WORK],[MOVE],Game.rooms[myRoom.name],!1,10);const id=helper_functions_1.HelperFunctions.getId();return spawn.spawnCreep(body,"Creep"+id,{memory:{name:"Creep"+id,role:"Miner",assignedRoomName:spawn.room.name}})===OK?(mySource.minerName="Creep"+id,{name:"Creep"+id,role:"Miner",assignedRoomName:spawn.room.name,cachePosToMineOn:mySource.cache.pos,linkIdToDepositTo:linkId,sourceId:mySource.id}):null}}},
/*!*********************************************!*\
  !*** ./ts-dist/room/spawns/spawn-hauler.js ***!
  \*********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const helper_functions_1=__webpack_require__(/*! ../../global/helper-functions */1),constants_1=__webpack_require__(/*! ../../global/constants */3),report_controller_1=__webpack_require__(/*! ../../reporting/report-controller */0);exports.SpawnHauler=class{static trySpawnHauler(myRoom){if(!(myRoom.roomStage<4))for(let i=0;i<myRoom.mySources.length;i++){const mySource=myRoom.mySources[i];if(null==mySource.cache||null==mySource.cache.id)continue;const myCache=Game.getObjectById(mySource.cache.id);if("Cache"===mySource.state&&mySource.haulerNames.length<constants_1.Constants.MAX_HAULERS_PER_SOURCE&&0===mySource.haulerCooldown&&null!=myCache&&myCache.store[RESOURCE_ENERGY]>=myCache.storeCapacity*constants_1.Constants.PERCENT_OF_CACHE_ENERGY_TO_SPAWN_HAULER){const newCreep=this.spawnHauler(myRoom,mySource);if(null!=newCreep){myRoom.myCreeps.push(newCreep),mySource.haulerNames.push(newCreep.name),console.log("LOG: Spawned a new hauler");const haulerCooldown=Math.round(50+Game.spawns[myRoom.spawns[0].name].pos.getRangeTo(myCache.pos)*constants_1.Constants.HAULER_COOLDOWN_DISTANCE_FACTOR);return void(mySource.haulerCooldown=haulerCooldown)}}}}static spawnHauler(myRoom,mySource){if(0===myRoom.spawns.length)return report_controller_1.ReportController.log("ERROR","Attempted to spawn hauler in a room with no spawner (1)"),null;const spawn=Game.spawns[myRoom.spawns[0].name];if(null==spawn)return report_controller_1.ReportController.log("ERROR","Attempted to spawn hauler in a room with no spawner (2)"),null;if(null==mySource.cache)return report_controller_1.ReportController.log("ERROR","Attempted to spawn hauler for a source with no cache pos"),null;const body=helper_functions_1.HelperFunctions.generateBody([MOVE,CARRY],[MOVE,CARRY],spawn.room,!0,10),id=helper_functions_1.HelperFunctions.getId();return spawn.spawnCreep(body,"Creep"+id,{memory:{name:"Creep"+id,role:"Hauler",assignedRoomName:spawn.room.name}})===OK?{name:"Creep"+id,role:"Hauler",assignedRoomName:spawn.room.name,cachePosToPickupFrom:mySource.cache.pos,pickup:!0}:null}}},
/*!**************************************************!*\
  !*** ./ts-dist/room/spawns/spawn-bank-linker.js ***!
  \**************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const helper_functions_1=__webpack_require__(/*! ../../global/helper-functions */1),report_controller_1=__webpack_require__(/*! ../../reporting/report-controller */0);exports.SpawnBankLinker=class{static run(myRoom){if(myRoom.roomStage<5)return;if(null!=myRoom.bankLinkerName)return;const bankLinker=this.spawnBankLinker(myRoom);null!=bankLinker&&(myRoom.myCreeps.push(bankLinker),myRoom.bankLinkerName=bankLinker.name,console.log("LOG: Spawned a BankLinker"))}static spawnBankLinker(myRoom){if(0===myRoom.spawns.length)return report_controller_1.ReportController.log("ERROR","Attempted to spawn BankLinker in a room with no spawner (1)"),null;const spawn=Game.spawns[myRoom.spawns[0].name];if(null==spawn)return report_controller_1.ReportController.log("ERROR","Attempted to spawn BankLinker in a room with no spawner (2)"),null;const id=helper_functions_1.HelperFunctions.getId();return spawn.spawnCreep([MOVE,CARRY],"Creep"+id,{memory:{name:"Creep"+id,role:"BankLinker",assignedRoomName:spawn.room.name}})===OK?{name:"Creep"+id,role:"BankLinker",assignedRoomName:spawn.room.name}:null}}},
/*!*******************************************!*\
  !*** ./ts-dist/room/roles/bank-linker.js ***!
  \*******************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const report_controller_1=__webpack_require__(/*! ../../reporting/report-controller */0);exports.RoleBankLinker=class{static run(bankLinker,myRoom){const creep=Game.creeps[bankLinker.name];if(null!=creep){if(bankLinker.assignedRoomName!==creep.room.name)return creep.say("Fukn Lost"),void creep.moveTo(new RoomPosition(25,25,bankLinker.assignedRoomName));if(creep.carry[RESOURCE_ENERGY]===creep.carryCapacity){const bank=myRoom.bank;if(null==bank)return void report_controller_1.ReportController.log("ERROR","Bank was null for a bank linker");creep.transfer(bank,RESOURCE_ENERGY)===ERR_NOT_IN_RANGE&&creep.moveTo(bank)}else{if(null==myRoom.bankLink||null==myRoom.bankLink.id)return void report_controller_1.ReportController.log("ERROR","Bank Link was null for a bank linker");const link=Game.getObjectById(myRoom.bankLink.id);if(null==link)return void report_controller_1.ReportController.log("ERROR","Bank Link was null for a bank linker");creep.withdraw(link,RESOURCE_ENERGY)===ERR_NOT_IN_RANGE&&creep.moveTo(link)}}else report_controller_1.ReportController.log("ERROR","BankLinker creep is null. Creep ID: "+bankLinker.name)}}},
/*!************************************************!*\
  !*** ./ts-dist/room/structures/source-link.js ***!
  \************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const constants_1=__webpack_require__(/*! ../../global/constants */3),report_controller_1=__webpack_require__(/*! ../../reporting/report-controller */0);exports.RoomSourceLinkController=class{static run(myRoom,myLink){if(null===myLink.id)return;if(null==myRoom.bankLink||null==myRoom.bankLink.id)return;const link=Game.getObjectById(myLink.id);if(null===link)return report_controller_1.ReportController.log("ERROR","Link was null when accessed by ID. Setting it to null"),void(myLink.id=null);if(link.energy>=constants_1.Constants.SOURCE_LINK_TRANSFER_AT){for(let i=0;i<myRoom.outLinks.length;i++){const myOutLink=myRoom.outLinks[i];if(null!=myOutLink.id){const outLink=Game.getObjectById(myOutLink.id);if(null!=outLink&&outLink.energyCapacity-outLink.energy>=link.energy)return void link.transferEnergy(outLink)}}const bankLink=Game.getObjectById(myRoom.bankLink.id);if(null===bankLink)return report_controller_1.ReportController.log("ERROR","Bank link was null when accessed by ID. Setting it to null"),void(myRoom.bankLink.id=null);link.transferEnergy(bankLink)}}}},
/*!*********************************************!*\
  !*** ./ts-dist/empire/empire-controller.js ***!
  \*********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const claimer_1=__webpack_require__(/*! ./role/claimer */43),spawn_claimer_controller_1=__webpack_require__(/*! ./spawn-claimer-controller */44),attack_controller_1=__webpack_require__(/*! ./attack-controller */45);exports.EmpireController=class{static run(myMemory){spawn_claimer_controller_1.SpawnClaimerController.run(myMemory),attack_controller_1.AttackController.run(myMemory);for(let i=0;i<myMemory.empire.creeps.length;i++){const claimer=myMemory.empire.creeps[i];"Claimer"===claimer.role&&claimer_1.RoleClaimer.run(claimer)}}}},
/*!****************************************!*\
  !*** ./ts-dist/empire/role/claimer.js ***!
  \****************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const report_controller_1=__webpack_require__(/*! ../../reporting/report-controller */0);exports.RoleClaimer=class{static run(claimer){const creep=Game.creeps[claimer.name];if(null==creep)return void report_controller_1.ReportController.log("ERROR","Claimer creep is null. Creep ID: "+claimer.name);const flag=Game.flags[claimer.flagName];if(null==flag&&(creep.say("dthb4dshnr"),creep.suicide()),claimer.assignedRoomName!==creep.room.name)return creep.say("Fukn Lost"),void creep.moveTo(flag.pos);null!=creep.room.controller?creep.claimController(creep.room.controller)===ERR_NOT_IN_RANGE&&creep.moveTo(creep.room.controller):report_controller_1.ReportController.log("ERROR","Claimer can't claim a room with no controller")}}},
/*!****************************************************!*\
  !*** ./ts-dist/empire/spawn-claimer-controller.js ***!
  \****************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const helper_functions_1=__webpack_require__(/*! ../global/helper-functions */1),report_controller_1=__webpack_require__(/*! ../reporting/report-controller */0);exports.SpawnClaimerController=class{static run(myMemory){const flag=Game.flags.claim;if(null!=flag)if(null!=flag.room&&null!=flag.room.controller&&!0===flag.room.controller.my)flag.remove(),report_controller_1.ReportController.log("OTHER","Room "+flag.room.name+" has been claimed");else{let claimerAlreadyMade=!1;for(let j=0;j<myMemory.empire.creeps.length;j++)if("Claimer"===myMemory.empire.creeps[j].role){claimerAlreadyMade=!0;break}if(!claimerAlreadyMade){const claimer=this.spawnClaimer(flag);null!=claimer&&(console.log("LOG: Spawned a new claimer"),myMemory.empire.creeps.push(claimer))}}}static spawnClaimer(flag){const spawn=helper_functions_1.HelperFunctions.findClosestSpawn(flag.pos);if(null==spawn)return flag.remove(),report_controller_1.ReportController.log("ERROR","Couldn't find a spawn to make a claimer"),null;const id=helper_functions_1.HelperFunctions.getId();return spawn.spawnCreep([MOVE,CLAIM],"Creep"+id,{memory:{name:"Creep"+id,role:"Claimer",assignedRoomName:flag.pos.roomName}})===OK?{name:"Creep"+id,role:"Claimer",assignedRoomName:flag.pos.roomName,flagName:flag.name}:null}}},
/*!*********************************************!*\
  !*** ./ts-dist/empire/attack-controller.js ***!
  \*********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const attack_quick_controller_1=__webpack_require__(/*! ./attack-quick-controller */46),attack_pressure_controller_1=__webpack_require__(/*! ./attack-pressure-controller */47);exports.AttackController=class{static run(myMemory){const attackQuick=myMemory.empire.attackQuick;if(null==attackQuick){const flag=Game.flags["attack-quick-rally"];null!=flag&&(myMemory.empire.attackQuick=attack_quick_controller_1.AttackQuickController.setupAttackQuick(myMemory.myRooms,flag))}null!=attackQuick&&attack_quick_controller_1.AttackQuickController.run(myMemory,attackQuick);const attackPressure=myMemory.empire.attackPressure;if(null==attackPressure){const flag=Game.flags["attack-pressure-rally"];null!=flag&&(myMemory.empire.attackPressure=attack_pressure_controller_1.AttackPressureController.setupAttackPressure(myMemory.myRooms,flag))}null!=attackPressure&&attack_pressure_controller_1.AttackPressureController.run(myMemory,attackPressure)}}},
/*!***************************************************!*\
  !*** ./ts-dist/empire/attack-quick-controller.js ***!
  \***************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const report_controller_1=__webpack_require__(/*! ../reporting/report-controller */0),constants_1=__webpack_require__(/*! ../global/constants */3),helper_functions_1=__webpack_require__(/*! ../global/helper-functions */1),attack_helper_functions_1=__webpack_require__(/*! ./attack-helper-functions */5),attack_creep_1=__webpack_require__(/*! ./role/attack-creep */6),schedule_controller_1=__webpack_require__(/*! ../schedule/schedule-controller */4);exports.AttackQuickController=class{static run(myMemory,attackQuick){let flag=null;if("Conscripting"===attackQuick.state){if(null==(flag=Game.flags["attack-quick-rally"]))return report_controller_1.ReportController.log("ERROR","attack-quick-rally flag doesn't exist during AttackQuick. Cancelling the attack."),void this.endAttack();for(let i=attackQuick.roomsStillToProvide.length-1;i>=0;i--){const myRoom=helper_functions_1.HelperFunctions.getMyRoomByName(attackQuick.roomsStillToProvide[i]),attackQuickCreep=this.spawnAttackQuickCreep(myRoom);null!=attackQuickCreep&&(console.log("LOG: "+myRoom.name+" has been conscripted "+attackQuickCreep.name+" for AttackQuick"),schedule_controller_1.ScheduleController.scheduleForNextTick("SET_FALSE_ON_PENDING_CONSCRIPTED_CREEP",myRoom.name),myMemory.empire.creeps.push(attackQuickCreep),attackQuick.roomsStillToProvide.splice(i,1))}if(0===attackQuick.roomsStillToProvide.length)return void(attackQuick.state="Rally")}if("Rally"===attackQuick.state){if(null==(flag=Game.flags["attack-quick-rally"]))return report_controller_1.ReportController.log("ERROR","attack-quick-rally flag doesn't exist during AttackQuick. Cancelling the attack."),void this.endAttack();let allCreepsAtFlag=!0;for(let i=0;i<myMemory.empire.creeps.length;i++){const myCreep=myMemory.empire.creeps[i];if("AttackQuickCreep"===myCreep.role&&!Game.creeps[myCreep.name].pos.inRangeTo(flag.pos,constants_1.Constants.RALLY_FLAG_RANGE)){allCreepsAtFlag=!1;break}}allCreepsAtFlag&&(console.log("LOG: AttackQuick Charge"),attackQuick.state="Charge")}if("Charge"===attackQuick.state){if(null==(flag=Game.flags["attack-quick-room-target"]))return report_controller_1.ReportController.log("ERROR","attack-quick-room-target flag doesn't exist during AttackQuick. Cancelling the attack."),void this.endAttack();0===myMemory.empire.creeps.length&&(console.log("ATTACK: Creeps are all dead, ending attack"),this.endAttack()),attackQuick.attackTarget=attack_helper_functions_1.AttackHelperFunctions.getNewTargetIfNeeded(attackQuick.attackTarget,flag)}for(let i=0;i<myMemory.empire.creeps.length;i++){const attackQuickCreep=myMemory.empire.creeps[i];"AttackQuickCreep"===attackQuickCreep.role&&attack_creep_1.RoleAttackCreep.run(attackQuickCreep,attackQuick.state,flag,attackQuick.attackTarget)}null!=attackQuick.attackTarget&&delete attackQuick.attackTarget.roomObject}static setupAttackQuick(myRooms,rallyFlag){const attackQuick={state:"Conscripting",roomsStillToProvide:[],attackTarget:null};let outputMessage="";for(let i=0;i<myRooms.length;i++){const myRoom=myRooms[i];myRoom.roomStage>=constants_1.Constants.CONSCRIPTION_QUICK_MINIMUM_STAGE&&Game.map.getRoomLinearDistance(rallyFlag.pos.roomName,myRoom.name)<constants_1.Constants.CONSCRIPTION_RANGE&&(myRoom.pendingConscriptedCreep=!0,attackQuick.roomsStillToProvide.push(myRoom.name),outputMessage+=myRoom.name+", ")}return 0===attackQuick.roomsStillToProvide.length?(console.log("LOG: Canceling an AttackQuick because no rooms were in conscription range."),this.endAttack(),null):(outputMessage=outputMessage.slice(0,outputMessage.length-2),console.log("AttackQuick: "+attackQuick.roomsStillToProvide.length+" Rooms conscripted for AttackQuick ("+outputMessage+")"),attackQuick)}static spawnAttackQuickCreep(myRoom){const spawn=Game.spawns[myRoom.spawns[0].name],id=helper_functions_1.HelperFunctions.getId(),body=helper_functions_1.HelperFunctions.generateBody([MOVE,ATTACK],[MOVE,ATTACK],spawn.room,!0,50,!0);return spawn.spawnCreep(body,"Creep"+id,{memory:{name:"Creep"+id,role:"AttackQuickCreep",assignedRoomName:""}})===OK?{name:"Creep"+id,role:"AttackQuickCreep",assignedRoomName:""}:null}static endAttack(){const empire=Memory.myMemory.empire;empire.attackQuick=null;for(let i=empire.creeps.length-1;i>=0;i--)"AttackQuickCreep"===empire.creeps[i].role&&(console.log("LOG: Killing AttackQuickCreep "+empire.creeps[i].name),Game.creeps[empire.creeps[i].name].suicide());attack_helper_functions_1.AttackHelperFunctions.endAttack()}}},
/*!******************************************************!*\
  !*** ./ts-dist/empire/attack-pressure-controller.js ***!
  \******************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const constants_1=__webpack_require__(/*! ../global/constants */3),report_controller_1=__webpack_require__(/*! ../reporting/report-controller */0),helper_functions_1=__webpack_require__(/*! ../global/helper-functions */1),attack_helper_functions_1=__webpack_require__(/*! ./attack-helper-functions */5),attack_creep_1=__webpack_require__(/*! ./role/attack-creep */6),schedule_controller_1=__webpack_require__(/*! ../schedule/schedule-controller */4);exports.AttackPressureController=class{static run(myMemory,attackPressure){let updatedTarget=!1;const attackPressureCreeps=[];for(let i=0;i<myMemory.empire.creeps.length;i++){const creep=myMemory.empire.creeps[i];"AttackPressureCreep"===creep.role&&attackPressureCreeps.push(creep)}for(let i=attackPressure.batches.length-1;i>=0;i--){let flag=null;const batch=attackPressure.batches[i];if("Conscripting"===batch.state){if(null==(flag=Game.flags["attack-pressure-rally"]))return report_controller_1.ReportController.log("ERROR","attack-pressure-rally flag doesn't exist during AttackPressure. Cancelling the attack."),void this.endAttack();this.batchRunConscript(batch,myMemory.empire)}if("Rally"===batch.state){if(null==(flag=Game.flags["attack-pressure-rally"]))return report_controller_1.ReportController.log("ERROR","attack-pressure-rally flag doesn't exist during AttackPressure. Cancelling the attack."),void this.endAttack();this.batchRunRally(batch,flag,myMemory.empire)&&this.startBatch(attackPressure)}if("Charge"===batch.state){if(null==(flag=Game.flags["attack-pressure-room-target"]))return report_controller_1.ReportController.log("ERROR","attack-pressure-room-target flag doesn't exist during AttackPressure. Cancelling the attack."),void this.endAttack();updatedTarget||(updatedTarget=!0,attackPressure.attackTarget=attack_helper_functions_1.AttackHelperFunctions.getNewTargetIfNeeded(attackPressure.attackTarget,flag))}for(let j=0;j<attackPressureCreeps.length;j++)attackPressureCreeps[j].batchNumber===batch.batchNumber&&attack_creep_1.RoleAttackCreep.run(attackPressureCreeps[j],batch.state,flag,attackPressure.attackTarget)}null!=attackPressure.attackTarget&&delete attackPressure.attackTarget.roomObject}static setupAttackPressure(myRooms,rallyFlag){const attackPressure={batchesStarted:0,batches:[],roomsInRange:[],attackTarget:null};let outputMessage="";for(let i=0;i<myRooms.length;i++){const myRoom=myRooms[i];myRoom.roomStage>=constants_1.Constants.CONSCRIPTION_PRESSURE_MINIMUM_STAGE&&Game.map.getRoomLinearDistance(rallyFlag.pos.roomName,myRoom.name)<constants_1.Constants.CONSCRIPTION_RANGE&&(attackPressure.roomsInRange.push(myRoom.name),outputMessage+=myRoom.name+", ")}return 0===attackPressure.roomsInRange.length?(console.log("LOG: Canceling an AttackPressure because no rooms were in conscription range."),this.endAttack(),null):(outputMessage=outputMessage.slice(0,outputMessage.length-2),console.log("AttackPressure: "+attackPressure.roomsInRange.length+" Rooms conscripted for AttackPressure ("+outputMessage+")"),this.startBatch(attackPressure),attackPressure)}static batchRunRally(batch,flag,empire){let allCreepsAtFlag=!0;for(let i=0;i<empire.creeps.length;i++){const myCreep=empire.creeps[i];if("AttackPressureCreep"===myCreep.role&&!Game.creeps[myCreep.name].pos.inRangeTo(flag.pos,constants_1.Constants.RALLY_FLAG_RANGE)){allCreepsAtFlag=!1;break}}return!!allCreepsAtFlag&&(console.log("LOG: AttackPressure Charge"),batch.state="Charge",!0)}static batchRunConscript(batch,empire){for(let i=batch.roomsStillToProvide.length-1;i>=0;i--){const myRoom=helper_functions_1.HelperFunctions.getMyRoomByName(batch.roomsStillToProvide[i]),attackPressureCreep=this.spawnAttackPressureCreep(myRoom,batch.batchNumber);null!=attackPressureCreep&&(console.log("LOG: "+myRoom.name+" has been conscripted "+attackPressureCreep.name+" for AttackPressure"),schedule_controller_1.ScheduleController.scheduleForNextTick("SET_FALSE_ON_PENDING_CONSCRIPTED_CREEP",myRoom.name),empire.creeps.push(attackPressureCreep),batch.roomsStillToProvide.splice(i,1))}0!==batch.roomsStillToProvide.length||(batch.state="Rally")}static spawnAttackPressureCreep(myRoom,batchNumber){const spawn=Game.spawns[myRoom.spawns[0].name],id=helper_functions_1.HelperFunctions.getId(),body=helper_functions_1.HelperFunctions.generateBody([MOVE,ATTACK],[MOVE,ATTACK],spawn.room,!0,50,!0);return spawn.spawnCreep(body,"Creep"+id,{memory:{name:"Creep"+id,role:"AttackPressureCreep",assignedRoomName:""}})===OK?{name:"Creep"+id,role:"AttackPressureCreep",assignedRoomName:"",batchNumber:batchNumber}:null}static startBatch(attackPressure){attackPressure.batches.push({state:"Conscripting",batchNumber:attackPressure.batchesStarted,roomsStillToProvide:attackPressure.roomsInRange});for(let i=0;i<attackPressure.roomsInRange.length;i++)helper_functions_1.HelperFunctions.getMyRoomByName(attackPressure.roomsInRange[i]).pendingConscriptedCreep=!0;console.log("Conscripting for batch "+attackPressure.batchesStarted),attackPressure.batchesStarted++}static endAttack(){const empire=Memory.myMemory.empire;empire.attackPressure=null;for(let i=empire.creeps.length-1;i>=0;i--)"AttackPressureCreep"===empire.creeps[i].role&&(console.log("LOG: Killing AttackPressureCreep "+empire.creeps[i].name),Game.creeps[empire.creeps[i].name].suicide());attack_helper_functions_1.AttackHelperFunctions.endAttack()}}},
/*!*************************!*\
  !*** ./ts-dist/main.js ***!
  \*************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const room_controller_1=__webpack_require__(/*! ./room/room-controller */7),memory_controller_1=__webpack_require__(/*! ./memory/memory-controller */49),empire_controller_1=__webpack_require__(/*! ./empire/empire-controller */42),report_controller_1=__webpack_require__(/*! ./reporting/report-controller */0),schedule_controller_1=__webpack_require__(/*! ./schedule/schedule-controller */4),profiler_wrapper_1=__webpack_require__(/*! ./profiler/profiler-wrapper */50);console.log("Script reloaded"),profiler_wrapper_1.ProfilerWrapper.setup(),profiler_wrapper_1.ProfilerWrapper.clearProfilingData(),null==Memory.myMemory&&(Memory.myMemory={globalId:0,myRooms:[],report:{lastReportTimeStamp:(new Date).getTime(),reports:[]},empire:{attackQuick:null,attackPressure:null,creeps:[]},scheduledCommands:[]}),exports.loop=function(){const myMemory=Memory.myMemory;memory_controller_1.MemoryController.run(),schedule_controller_1.ScheduleController.preLoop(myMemory),report_controller_1.ReportController.checkForReportFlag(),empire_controller_1.EmpireController.run(myMemory);for(let i=0;i<myMemory.myRooms.length;i++)room_controller_1.RoomController.run(myMemory.myRooms[i]);memory_controller_1.MemoryController.clearBanks()}},
/*!*********************************************!*\
  !*** ./ts-dist/memory/memory-controller.js ***!
  \*********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const helper_functions_1=__webpack_require__(/*! ../global/helper-functions */1),report_controller_1=__webpack_require__(/*! ../reporting/report-controller */0);exports.MemoryController=class{static run(){this.clearDeadCreeps(),this.ensureAllRoomsInMyMemory(),this.validateRoomsInMyMemory(),this.cleanUpEmpireCreeps(),this.getBanks(),this.reduceCooldowns()}static clearBanks(){for(let i=0;i<Memory.myMemory.myRooms.length;i++)Memory.myMemory.myRooms[i].bank=null}static clearDeadCreeps(){for(const i in Memory.creeps)Game.creeps[i]||delete Memory.creeps[i]}static ensureAllRoomsInMyMemory(){for(const roomName in Game.rooms){const room=Game.rooms[roomName];let myRoom=null;if(null!=room.controller&&!0===room.controller.my){for(let i=0;i<Memory.myMemory.myRooms.length;i++){const myExistingRoom=Memory.myMemory.myRooms[i];null!=myExistingRoom&&myExistingRoom.name===roomName&&(myRoom=myExistingRoom)}if(null==myRoom){report_controller_1.ReportController.log("OTHER","Adding a new room to memory"+roomName);const newMyRoom={name:roomName,myCreeps:[],spawns:[],mySources:[],roomStage:-1,bankPos:null,bankLinkerName:null,bankLink:null,bank:null,outLinks:[],pendingConscriptedCreep:!1},sources=room.find(FIND_SOURCES);for(let i=0;i<sources.length;i++){const source=sources[i];newMyRoom.mySources.push({id:source.id,state:"NoCache",minerName:null,haulerNames:[],haulerCooldown:0,cache:null,link:null})}const spawns=room.find(FIND_MY_SPAWNS);for(let i=0;i<spawns.length;i++){const spawn=spawns[i];newMyRoom.spawns.push({position:helper_functions_1.HelperFunctions.roomPosToMyPos(spawn.pos),name:spawn.name})}Memory.myMemory.myRooms.push(newMyRoom)}else{const spawns=room.find(FIND_MY_SPAWNS);if(spawns.length!==myRoom.spawns.length){myRoom.spawns=[];for(let i=0;i<spawns.length;i++){const spawn=spawns[i];myRoom.spawns.push({position:helper_functions_1.HelperFunctions.roomPosToMyPos(spawn.pos),name:spawn.name})}}}}}}static validateRoomsInMyMemory(){for(let i=Memory.myMemory.myRooms.length-1;i>=0;i--){const myRoom=Memory.myMemory.myRooms[i],room=Game.rooms[myRoom.name];if(null!=room&&null!=room.controller&&!1!==room.controller.my)for(let j=myRoom.myCreeps.length-1;j>=0;j--){const myCreep=myRoom.myCreeps[j];null==Game.creeps[myCreep.name]&&(this.handleCreepDying(myRoom,myCreep),myRoom.myCreeps.splice(j,1))}else console.log("OTHER","Removing room from memory"+myRoom.name),Memory.myMemory.myRooms.splice(i,1)}}static handleCreepDying(myRoom,myCreep){if("Miner"===myCreep.role){for(let i=0;i<myRoom.mySources.length;i++){const mySource=myRoom.mySources[i];mySource.minerName===myCreep.name&&(mySource.minerName=null)}console.log("LOG: A Miner has died")}else if("Hauler"===myCreep.role){for(let i=0;i<myRoom.mySources.length;i++){const mySource=myRoom.mySources[i];for(let j=mySource.haulerNames.length-1;j>=0;j--)mySource.haulerNames[j]===myCreep.name&&mySource.haulerNames.splice(j,1)}console.log("LOG: A Hauler has died")}else"Laborer"===myCreep.role?console.log("LOG: A Laborer has died"):"Claimer"===myCreep.role?console.log("LOG: A Claimer has died"):"BankLinker"===myCreep.role?(myRoom.bankLinkerName=null,console.log("LOG: A BankLinker has died")):report_controller_1.ReportController.log("ERROR","A Creep with a weird role has died: "+myCreep.role)}static cleanUpEmpireCreeps(){for(let i=Memory.myMemory.empire.creeps.length-1;i>=0;i--){const myCreep=Memory.myMemory.empire.creeps[i];null==Game.creeps[myCreep.name]&&Memory.myMemory.empire.creeps.splice(i,1)}}static getBanks(){for(let i=0;i<Memory.myMemory.myRooms.length;i++){const myRoom=Memory.myMemory.myRooms[i];if(null!=myRoom.bankPos){const structures=helper_functions_1.HelperFunctions.myPosToRoomPos(myRoom.bankPos).lookFor(LOOK_STRUCTURES);for(let j=0;j<structures.length;j++)if(structures[j].structureType===STRUCTURE_STORAGE){myRoom.bank=structures[j];break}}}}static reduceCooldowns(){for(let i=0;i<Memory.myMemory.myRooms.length;i++){const myRoom=Memory.myMemory.myRooms[i];for(let j=0;j<myRoom.mySources.length;j++){const mySource=myRoom.mySources[j];mySource.haulerCooldown>0&&mySource.haulerCooldown--}}}}},
/*!**********************************************!*\
  !*** ./ts-dist/profiler/profiler-wrapper.js ***!
  \**********************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const profiler_1=__webpack_require__(/*! ./profiler */51),laborer_1=__webpack_require__(/*! ../room/roles/laborer */34),attack_creep_1=__webpack_require__(/*! ../empire/role/attack-creep */6),claimer_1=__webpack_require__(/*! ../empire/role/claimer */43),empire_controller_1=__webpack_require__(/*! ../empire/empire-controller */42),attack_controller_1=__webpack_require__(/*! ../empire/attack-controller */45),attack_helper_functions_1=__webpack_require__(/*! ../empire/attack-helper-functions */5),attack_pressure_controller_1=__webpack_require__(/*! ../empire/attack-pressure-controller */47),attack_quick_controller_1=__webpack_require__(/*! ../empire/attack-quick-controller */46),spawn_claimer_controller_1=__webpack_require__(/*! ../empire/spawn-claimer-controller */44),helper_functions_1=__webpack_require__(/*! ../global/helper-functions */1),report_controller_1=__webpack_require__(/*! ../reporting/report-controller */0),bank_linker_1=__webpack_require__(/*! ../room/roles/bank-linker */40),hauler_1=__webpack_require__(/*! ../room/roles/hauler */10),miner_1=__webpack_require__(/*! ../room/roles/miner */9),room_spawn_controller_1=__webpack_require__(/*! ../room/spawns/room-spawn-controller */35),spawn_bank_linker_1=__webpack_require__(/*! ../room/spawns/spawn-bank-linker */39),spawn_hauler_1=__webpack_require__(/*! ../room/spawns/spawn-hauler */38),spawn_laborer_1=__webpack_require__(/*! ../room/spawns/spawn-laborer */36),spawn_miner_1=__webpack_require__(/*! ../room/spawns/spawn-miner */37),stage0_1=__webpack_require__(/*! ../room/stages/stage0 */13),stage0_5_1=__webpack_require__(/*! ../room/stages/stage0_5 */14),stage1_1=__webpack_require__(/*! ../room/stages/stage1 */15),stage1_3_1=__webpack_require__(/*! ../room/stages/stage1_3 */16),stage1_6_1=__webpack_require__(/*! ../room/stages/stage1_6 */17),stage2_1=__webpack_require__(/*! ../room/stages/stage2 */18),stage2_3_1=__webpack_require__(/*! ../room/stages/stage2_3 */19),stage2_6_1=__webpack_require__(/*! ../room/stages/stage2_6 */20),stage3_1=__webpack_require__(/*! ../room/stages/stage3 */21),stage3_3_1=__webpack_require__(/*! ../room/stages/stage3_3 */22),stage3_6_1=__webpack_require__(/*! ../room/stages/stage3_6 */23),stage4_1=__webpack_require__(/*! ../room/stages/stage4 */24),stage4_2_1=__webpack_require__(/*! ../room/stages/stage4_2 */25),stage4_4_1=__webpack_require__(/*! ../room/stages/stage4_4 */26),stage4_6_1=__webpack_require__(/*! ../room/stages/stage4_6 */27),stage4_8_1=__webpack_require__(/*! ../room/stages/stage4_8 */28),stage5_1=__webpack_require__(/*! ../room/stages/stage5 */29),stage5_2_1=__webpack_require__(/*! ../room/stages/stage5_2 */30),stage5_4_1=__webpack_require__(/*! ../room/stages/stage5_4 */31),stage5_6_1=__webpack_require__(/*! ../room/stages/stage5_6 */32),stage5_8_1=__webpack_require__(/*! ../room/stages/stage5_8 */33),stage_default_1=__webpack_require__(/*! ../room/stages/stage-default */12),stage_functions_1=__webpack_require__(/*! ../room/stages/stage-functions */2),source_link_1=__webpack_require__(/*! ../room/structures/source-link */41),tower_1=__webpack_require__(/*! ../room/structures/tower */8),room_controller_1=__webpack_require__(/*! ../room/room-controller */7),room_stage_controller_1=__webpack_require__(/*! ../room/room-stage-controller */11),schedule_controller_1=__webpack_require__(/*! ../schedule/schedule-controller */4);exports.ProfilerWrapper=class{static setup(){profiler_1.Profiler.setup(attack_creep_1.RoleAttackCreep,"RoleAttackCreep"),profiler_1.Profiler.setup(claimer_1.RoleClaimer,"RoleClaimer"),profiler_1.Profiler.setup(attack_controller_1.AttackController,"AttackController"),profiler_1.Profiler.setup(attack_helper_functions_1.AttackHelperFunctions,"AttackHelperFunctions"),profiler_1.Profiler.setup(attack_pressure_controller_1.AttackPressureController,"AttackPressureController"),profiler_1.Profiler.setup(attack_quick_controller_1.AttackQuickController,"AttackQuickController"),profiler_1.Profiler.setup(empire_controller_1.EmpireController,"EmpireController"),profiler_1.Profiler.setup(spawn_claimer_controller_1.SpawnClaimerController,"SpawnClaimerController"),profiler_1.Profiler.setup(helper_functions_1.HelperFunctions,"HelperFunctions"),profiler_1.Profiler.setup(report_controller_1.ReportController,"ReportController"),profiler_1.Profiler.setup(bank_linker_1.RoleBankLinker,"RoleBankLinker"),profiler_1.Profiler.setup(hauler_1.RoleHauler,"RoleHauler"),profiler_1.Profiler.setup(laborer_1.RoleLaborer,"RoleLaborer"),profiler_1.Profiler.setup(miner_1.RoleMiner,"RoleMiner"),profiler_1.Profiler.setup(room_spawn_controller_1.RoomSpawnController,"RoomSpawnController"),profiler_1.Profiler.setup(spawn_bank_linker_1.SpawnBankLinker,"SpawnBankLinker"),profiler_1.Profiler.setup(spawn_hauler_1.SpawnHauler,"SpawnHauler"),profiler_1.Profiler.setup(spawn_laborer_1.SpawnLaborer,"SpawnLaborer"),profiler_1.Profiler.setup(spawn_miner_1.SpawnMiner,"SpawnMiner"),profiler_1.Profiler.setup(stage0_1.Stage0,"Stage0"),profiler_1.Profiler.setup(stage0_5_1.Stage0_5,"Stage0_5"),profiler_1.Profiler.setup(stage1_1.Stage1,"Stage1"),profiler_1.Profiler.setup(stage1_3_1.Stage1_3,"Stage1_3"),profiler_1.Profiler.setup(stage1_6_1.Stage1_6,"Stage1_6"),profiler_1.Profiler.setup(stage2_1.Stage2,"Stage2"),profiler_1.Profiler.setup(stage2_3_1.Stage2_3,"Stage2_3"),profiler_1.Profiler.setup(stage2_6_1.Stage2_6,"Stage2_6"),profiler_1.Profiler.setup(stage3_1.Stage3,"Stage3"),profiler_1.Profiler.setup(stage3_3_1.Stage3_3,"Stage3_3"),profiler_1.Profiler.setup(stage3_6_1.Stage3_6,"Stage3_6"),profiler_1.Profiler.setup(stage4_1.Stage4,"Stage4"),profiler_1.Profiler.setup(stage4_2_1.Stage4_2,"Stage4_2"),profiler_1.Profiler.setup(stage4_4_1.Stage4_4,"Stage4_4"),profiler_1.Profiler.setup(stage4_6_1.Stage4_6,"Stage4_6"),profiler_1.Profiler.setup(stage4_8_1.Stage4_8,"Stage4_8"),profiler_1.Profiler.setup(stage5_1.Stage5,"Stage5"),profiler_1.Profiler.setup(stage5_2_1.Stage5_2,"Stage5_2"),profiler_1.Profiler.setup(stage5_4_1.Stage5_4,"Stage5_4"),profiler_1.Profiler.setup(stage5_6_1.Stage5_6,"Stage5_6"),profiler_1.Profiler.setup(stage5_8_1.Stage5_8,"Stage5_8"),profiler_1.Profiler.setup(stage_default_1.StageDefault,"StageDefault"),profiler_1.Profiler.setup(stage_functions_1.StageFunctions,"StageFunctions"),profiler_1.Profiler.setup(source_link_1.RoomSourceLinkController,"RoomSourceLinkController"),profiler_1.Profiler.setup(tower_1.RoomTowerController,"RoomTowerController"),profiler_1.Profiler.setup(room_controller_1.RoomController,"RoomController"),profiler_1.Profiler.setup(room_stage_controller_1.RoomStageController,"RoomStageController"),profiler_1.Profiler.setup(schedule_controller_1.ScheduleController,"ScheduleController")}static clearProfilingData(){Memory.profiler={}}}},
/*!**************************************!*\
  !*** ./ts-dist/profiler/profiler.js ***!
  \**************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.Profiler=class{static setup(thing,classString){console.log("Wrapping class: "+classString);const profiler=Memory.profiler;profiler[classString]={},Object.getOwnPropertyNames(thing).forEach(functionName=>{if(-1!==excludeList.indexOf(functionName))return;console.log(classString+"."+functionName),profiler[classString][functionName]={callCount:0,mean:0};const originalFunction=thing[functionName];thing[functionName]=function(){const before=performance.now();let result;0===arguments.length?result=originalFunction.call(thing):1===arguments.length?result=originalFunction.call(thing,arguments[0]):2===arguments.length?result=originalFunction.call(thing,arguments[0],arguments[1]):3===arguments.length?result=originalFunction.call(thing,arguments[0],arguments[1],arguments[2]):4===arguments.length?result=originalFunction.call(thing,arguments[0],arguments[1],arguments[2],arguments[3]):5===arguments.length?result=originalFunction.call(thing,arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]):6===arguments.length?result=originalFunction.call(thing,arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]):7===arguments.length?result=originalFunction.call(thing,arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]):console.log("ERROR: "+arguments.length);const after=performance.now();return console.log("Difference: "+(after-before)),result}})}};const excludeList=["prototype","length","name"]}]);